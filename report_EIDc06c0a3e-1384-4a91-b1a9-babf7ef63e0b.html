<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="&#xA;&#x9;&#x9;ETF Test Report&#xA;&#x9;&#x9;test report&#xA;&#x9;&#x9;Report URI&#xA;&#x9;&#x9;Link&#xA;&#x9;&#x9;Test Step URI&#xA;&#x9;&#x9;Link&#xA;&#x9;&#x9;Assertion URI&#xA;&#x9;&#x9;Link&#xA;&#x9;&#x9;Created&#xA;&#x9;&#x9;Test machine&#xA;&#x9;&#x9;Account&#xA;&#x9;&#x9;Report completed&#xA;&#x9;&#x9;Report version&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;Description&#xA;&#x9;&#x9;Short description&#xA;&#x9;&#x9;Detailed description&#xA;&#x9;&#x9;Author&#xA;&#x9;&#x9;Date created&#xA;&#x9;&#x9;Last editor&#xA;&#x9;&#x9;Last updated&#xA;&#x9;&#x9;Duration&#xA;&#x9;&#x9;Started&#xA;&#x9;&#x9;Resource&#xA;&#x9;&#x9;Specification reference&#xA;&#x9;&#x9;Reference&#xA;&#x9;&#x9;Version&#xA;&#x9;&#x9;Size&#xA;&#x9;&#x9;Size in bytes&#xA;&#x9;&#x9;Hash&#xA;&#x9;&#x9;Uploaded&#xA;&#x9;&#x9;Files&#xA;&#x9;&#x9;Test suites&#xA;&#x9;&#x9;Test suite&#xA;&#x9;&#x9;Test modules&#xA;&#x9;&#x9;Test module&#xA;&#x9;&#x9;Test cases&#xA;&#x9;&#x9;Test case&#xA;&#x9;&#x9;Test steps&#xA;&#x9;&#x9;Test step&#xA;&#x9;&#x9;Assertions&#xA;&#x9;&#x9;Assertion&#xA;&#x9;&#x9;Assertion type&#xA;&#x9;&#x9;Expression&#xA;&#x9;&#x9;Expected result&#xA;&#x9;&#x9;Label&#xA;&#x9;&#x9;Status&#xA;&#x9;&#x9;Failed&#xA;&#x9;&#x9;Passed&#xA;&#x9;&#x9;Passed, manual checks required&#xA;&#x9;&#x9;Internal error in test engine occured&#xA;&#x9;&#x9;Passed with warnings&#xA;&#x9;&#x9;Passed with notes&#xA;&#x9;&#x9;Skipped&#xA;&#x9;&#x9;Not applicable&#xA;&#x9;&#x9;Undefined&#xA;&#x9;&#x9;Test instruction&#xA;&#x9;&#x9;Total&#xA;&#x9;&#x9;Skipped&#xA;&#x9;&#x9;Failed&#xA;&#x9;&#x9;Warnings&#xA;&#x9;&#x9;Manual&#xA;&#x9;&#x9;Messages&#xA;&#x9;&#x9;Statistics&#xA;&#x9;&#x9;Parameters&#xA;&#x9;&#x9;Test object&#xA;&#x9;&#x9;Associated test object types&#xA;&#x9;&#x9;Dependency&#xA;&#x9;&#x9;Depends on&#xA;&#x9;&#x9;Level of detail&#xA;&#x9;&#x9;All details&#xA;&#x9;&#x9;Less information&#xA;&#x9;&#x9;Simplified&#xA;&#x9;&#x9;Show&#xA;&#x9;&#x9;All&#xA;&#x9;&#x9;Only failed&#xA;&#x9;&#x9;Only manual&#xA;&#x9;&#x9;Feature Type&#xA;&#x9;&#x9;Feature Count&#xA;&#x9;&#x9;Type&#xA;&#x9;&#x9;Count&#xA;&#x9;&#x9;Log path&#xA;&#x9;&#x9;Log URI&#xA;&#x9;&#x9;Link&#xA;&#x9;&#x9;Open in new tab&#xA;&#x9;" class="ui-mobile ui-mobile-rendering">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=Edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="web_author" content="interactive instruments GmbH">
      <title>ETF Test Report</title>
      <link rel="stylesheet" href="https://resources.etf-validator.net/report/v2/css/de.interactive-instruments.min.css?v2">
      <link rel="stylesheet" href="https://resources.etf-validator.net/report/v2/css/de.interactive-instruments.rep.css?v2">
      <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css"><script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.3.min.js" integrity="sha256-rsPUGdUPBXgalvIj4YKJrrUlmLXbOb6Cp7cdxn1qeUc=" crossorigin="anonymous"></script><script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js" integrity="sha256-MkfSkbXhZoQ1CyPwjC30mPfLF8iKF5n564n9WvCLX4E=" crossorigin="anonymous"></script></head>
   <body class="ui-mobile-viewport ui-overlay-a">
      <div data-role="header">
         <h1>My XML validation</h1><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/#test-reports" data-ajax="false" data-icon="back" data-iconpos="notext"></a></div>
      <div data-role="content">
         <div class="ui-grid-b">
            <div class="ui-block-a">
               <div id="rprtInfo">
                  <table>
                     <tbody>
                        <tr class="ReportDetail">
                           <td>Report URI</td>
                           <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en" data-ajax="false">Link</a></td>
                        </tr>
                        <tr>
                           <td>Status</td>
                           <td>Passed, manual checks required</td>
                        </tr>
                        <tr>
                           <td>Started</td>
                           <td>28/10/2025 16:40:27 GMT</td>
                        </tr>
                        <tr>
                           <td>Duration</td>
                           <td>10 s</td>
                        </tr>
                        <tr class="ReportDetail">
                           <td>Report version</td>
                           <td>2.1.0-b181101</td>
                        </tr>
                        <tr class="ReportDetail">
                           <td>Log URI</td>
                           <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/c06c0a3e-1384-4a91-b1a9-babf7ef63e0b/log" data-ajax="false">Link</a></td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <div class="ui-block-b">
               <div id="rprtStatistics">
                  <table id="my-table">
                     <thead>
                        <tr>
                           <th></th>
                           <th>Total Count</th>
                           <th>Skipped</th>
                           <th>Failed</th>
                           <th>Warnings</th>
                           <th>Manual</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>Test suites</td>
                           <td>3</td>
                           <td>0</td>
                           <td>0</td>
                           <td>0</td>
                           <td>1</td>
                        </tr>
                        <tr>
                           <td>Test cases</td>
                           <td>7</td>
                           <td>0</td>
                           <td>0</td>
                           <td>0</td>
                           <td>1</td>
                        </tr>
                        <tr>
                           <td>Assertions</td>
                           <td>33</td>
                           <td>0</td>
                           <td>0</td>
                           <td>0</td>
                           <td>2</td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <div class="ui-block-c">
               <div id="rprtControl">
                  <fieldset id="controlgroupLOD" data-role="controlgroup" data-mini="true">
                     <legend>Level of detail</legend><label for="cntrlAllDetails">All details</label><input type="radio" name="radio-lod" id="cntrlAllDetails" value="cntrlAllDetails"><label for="cntrlLessInformation">Less information</label><input type="radio" name="radio-lod" id="cntrlLessInformation" value="cntrlLessInformation"><label for="cntrlSimplified">Simplified</label><input type="radio" name="radio-lod" id="cntrlSimplified" value="cntrlSimplified" checked></fieldset>
                  <fieldset id="controlgroupShow" data-role="controlgroup" data-mini="true">
                     <legend>Show</legend><label for="cntrlShowAll">All</label><input type="radio" name="radio-filter" id="cntrlShowAll" value="cntrlShowAll" checked><label for="cntrlShowOnlyFailed">Only failed</label><input type="radio" name="radio-filter" id="cntrlShowOnlyFailed" value="cntrlShowOnlyFailed"><label for="cntrlShowOnlyManual">Only manual</label><input type="radio" name="radio-filter" id="cntrlShowOnlyManual" value="cntrlShowOnlyManual"></fieldset>
               </div>
            </div>
         </div>
         <div id="rprtParameters" data-role="collapsible" data-collapsed-icon="info" class="ReportDetail">
            <h3>Parameters</h3>
            <table>
               <tbody>
                  <tr>
                     <td>tests_to_execute</td>
                     <td>.*</td>
                  </tr>
                  <tr>
                     <td>files_to_test</td>
                     <td>.*</td>
                  </tr>
               </tbody>
            </table>
         </div>
         <div id="rprtTestobject" data-role="collapsible" data-collapsed-icon="info" class="DoNotShowInSimpleView">
            <h3>Test object: 2b_HELEO-L1C-INSPIRE-THE-CORRECT - Version_3 - Copy.xml</h3>
            <p>Files: 1</p>
            <p>Size: 34 KB</p>
            <p>Associated test object types: </p>
            <ul>
               <li>Metadata records  (A set of XML documents. Each document contains one or more gmd:MD_Metadata elements.)</li>
            </ul>
         </div>
         <div id="rprtStatReport" data-role="collapsible" data-collapsed-icon="info" class="DoNotShowInSimpleView">
            <h3>Metadata record statistics</h3>
            <table>
               <tbody>
                  <tr>
                     <th>Type</th>
                     <th>Total Count</th>
                  </tr>
                  <tr>
                     <td>all</td>
                     <td>1</td>
                  </tr>
                  <tr>
                     <td>dataset</td>
                     <td>1</td>
                  </tr>
               </tbody>
            </table>
         </div>
         <div id="rprtLogFile" data-role="collapsible" data-collapsed-icon="info" class="DoNotShowInSimpleView">
            <h3>Log path: Common Requirements for ISO/TC 19139:2007 based INSPIRE metadata records.</h3>
            <pre>Testing 1 records
Executing Test Suite: /etf/projects/inspire-ets-repository/ets-repository-2025.1.1/metadata/2.0/common/ets-md-common-bsxets.xml
Statistics table: 9 ms
Test Suite 'Common Requirements for ISO/TC 19139:2007 based INSPIRE metadata records.' started
Test Case 'General requirements' started
Test Assertion 'md common req C.1: XML Schema': PASSED - 4618 ms
Test Assertion 'md common req C.2: Root Element': PASSED - 0 ms
Test Assertion 'md common req C.5: Language Code': PASSED - 0 ms
Test Assertion 'md common req C.6: Metadata Point of Contact': PASSED - 0 ms
Test Assertion 'md common req C.7: Metadata Date': PASSED - 34 ms
Test Case 'General requirements' finished: PASSED
Test Case 'Identification' started
Test Assertion 'md common req C.8: Resource Title': PASSED - 0 ms
Test Assertion 'md common req C.9: Resource Abstract': PASSED - 0 ms
Email Char: 1
Email Anch: 0
Test Assertion 'md common req C.10: Responsible Organization': PASSED - 13 ms
Test Assertion 'md common req C.11: Temporal Reference': PASSED - 18 ms
Test Assertion 'md common req C.12: Max One Date of Creation': PASSED - 0 ms
Test Assertion 'md common req C.13: Not More than one Date of Last Revision': PASSED - 0 ms
Test Assertion 'md common req C.14: Temporal Extent': PASSED - 171 ms
Test Assertion 'md common req C.15: Keyword Originating CV': PASSED - 0 ms
Test Assertion 'md common req C.16: Group Keywords by CV': PASSED - 0 ms
Test Assertion 'md common req C.17: Limitations on Public Access': PASSED - 0 ms
Test Assertion 'md common req C.18: Conditions for Access and Use': PASSED - 0 ms
Test Assertion 'md common req C.19: Geographical Bounding Box': PASSED - 0 ms
Test Case 'Identification' finished: PASSED
Test Case 'Data quality' started
Test Assertion 'md common req C.20: Dataset Conformity': PASSED - 0 ms
Test Assertion 'md common req C.21: Dataset Conformity Specifications': PASSED - 22 ms
Test Assertion 'md common req C.22: Conformity Degree': PASSED - 0 ms
Test Case 'Data quality' finished: PASSED
Test Suite 'Common Requirements for ISO/TC 19139:2007 based INSPIRE metadata records.' finished: PASSED
</pre>
         </div>
         <div id="rprtLogFile" data-role="collapsible" data-collapsed-icon="info" class="DoNotShowInSimpleView">
            <h3>Log path: Conformance Class 1: INSPIRE data sets and data set series baseline metadata.</h3>
            <pre>Testing 1 records
Executing Test Suite: /etf/projects/inspire-ets-repository/ets-repository-2025.1.1/metadata/2.0/datasets-and-series/ets-md-datasets-and-series-bsxets.xml
Statistics table: 9 ms
Test Suite 'Conformance Class 1: INSPIRE data sets and data set series baseline metadata.' started
Test Case 'General Metadata' started
Test Assertion 'md datasets-and-series 1.1: Resource Type': PASSED - 0 ms
Test Case 'General Metadata' finished: PASSED
Test Case 'Identification' started
Test Assertion 'md datasets-and-series 1.2: Only One Data Identification': PASSED - 0 ms
Test Assertion 'md datasets-and-series 1.3: Dataset UID': PASSED - 0 ms
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.bg.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.cs.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.da.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.de.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.et.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.el.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.en.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.es.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.fr.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.hr.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.it.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.lv.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.lt.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.hu.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.mt.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.nl.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.pl.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.pt.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.ro.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.sk.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.sl.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.fi.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.sv.atom'
Checking URL: 'http://inspire.ec.europa.eu/theme/theme.en.atom'
Test Assertion 'md datasets-and-series 1.4: INSPIRE Theme Keyword': PASSED - 1055 ms
Test Assertion 'md datasets-and-series 1.5: Spatial Resolution': PASSED - 0 ms
Test Assertion 'md datasets-and-series 1.6: Resource Language': PASSED - 0 ms
Test Assertion 'md datasets-and-series 1.7: Topic Category': PASSED - 0 ms
Test Case 'Identification' finished: PASSED
Test Case 'Distribution' started
Test Assertion 'md datasets-and-series 1.8: Resource Locator': PASSED - 1 ms
Test Assertion 'md datasets-and-series 1.9: Data Quality Info Section': PASSED - 0 ms
Code list value: Commission Regulation (EU) No 1089/2010 of 23 November 2010 implementing Directive 2007/2/EC of the European Parliament and of the Council as regards interoperability of spatial data sets and services
Code list value: publication
Test Assertion 'md datasets-and-series 1.10: Dataset Conformity': PASSED - 49 ms
Test Assertion 'md datasets-and-series 1.11: Lineage': PASSED - 1 ms
Test Case 'Distribution' finished: PASSED
Test Suite 'Conformance Class 1: INSPIRE data sets and data set series baseline metadata.' finished: PASSED
</pre>
         </div>
         <div id="rprtLogFile" data-role="collapsible" data-collapsed-icon="info" class="DoNotShowInSimpleView">
            <h3>Log path: Conformance Class 2b: INSPIRE data sets and data set series metadata for Monitoring</h3>
            <pre>Testing 1 records
Executing Test Suite: /etf/projects/inspire-ets-repository/ets-repository-2025.1.1/metadata/2.0/datasets-and-series/ets-md-monitoring-bsxets.xml
Statistics table: 9 ms
Test Suite 'Conformance Class 2b: INSPIRE data sets and data set series metadata for Monitoring' started
Test Case 'Monitoring requirements' started
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.bg.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.cs.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.da.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.de.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.et.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.el.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.en.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.es.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.fr.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.hr.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.it.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.lv.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.lt.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.hu.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.mt.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.nl.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.pl.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.pt.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.ro.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.sk.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.sl.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.fi.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.sv.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.en.atom'
Test Assertion 'M.1: Spatial scope keyword': PASSED_MANUAL - 1499 ms
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.bg.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.cs.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.da.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.de.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.et.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.el.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.en.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.es.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.fr.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.hr.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.it.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.lv.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.lt.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.hu.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.mt.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.nl.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.pl.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.pt.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.ro.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.sk.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.sl.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.fi.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.sv.atom'
Checking URL: 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.en.atom'
Test Assertion 'M.2: Priority datasets keyword': PASSED_MANUAL - 2714 ms
Test Case 'Monitoring requirements' finished: PASSED_MANUAL
Test Suite 'Conformance Class 2b: INSPIRE data sets and data set series metadata for Monitoring' finished: PASSED_MANUAL
</pre>
         </div>
         <div class="TestSuite" data-role="collapsible" data-theme="h" data-content-theme="h">
            <h2>Common Requirements for ISO/TC 19139:2007 based INSPIRE metadata records.
               <div class="ui-li-count">3</div>
            </h2><br/><br/>Please report any issues or problems <a href="https://github.com/INSPIRE-MIF/helpdesk-validator/wiki/Your-feedback" target="_blank">in GitHub</a>.<br/><br/>
Known limitations are documented in the description of the applicable test case or test assertion.<br/><br/>
There is a general limitation in all assertions that polymorphism and containment by reference (see the <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/README#ref_TG_MD" target="_blank">Technical Guidance</a>, sub-clauses A.3, A.4 and A.5) are not supported. However, the current Abstract Test Suite does not support polymorphism and references either (all XPath expressions do not support polymorhism or references; in addition, schema validation is only executed against the ISO/OGC schemas without extensions). It is therefore unclear if this is really a limitation or if the sections in the technical guidance are outdated.
<br/><br/>
Source: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common" target="_blank">Common Requirements for ISO/TC 19139:2007 based INSPIRE metadata records</a><br/><br/><br><br><table>
               <tbody>
                  <tr>
                     <td>Status</td>
                     <td>Passed</td>
                  </tr>
                  <tr>
                     <td>Duration</td>
                     <td>4 s</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Test suite ID</td>
                     <td>EID59692c11-df86-49ad-be7f-94a1e1ddd8da</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Author</td>
                     <td>Consortium Bilbomatica, Guadaltel y Geograma</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Date created</td>
                     <td>30/06/2018 00:00:00 GMT</td>
                  </tr>
                  <tr>
                     <td>Version</td>
                     <td>1.0.13</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Last editor</td>
                     <td>Consortium Bilbomatica, Guadaltel y Geograma</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Last updated</td>
                     <td>16/08/2022 13:00:00 GMT</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Reference</td>
                     <td><a class="ui-link" href="https://github.com/inspire-eu-validation/ets-repository/tree/master/metadata/2.0">Link</a></td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Hash</td>
                     <td>CBF29CE484222325</td>
                  </tr>
               </tbody>
            </table><br><div class="TestModulePlaceHolder">
               <div data-role="collapsible" data-enhanced="true" id="EID61e7ffc0-c181-11e8-a355-529269fb1459" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed TestCase SuccessfulTestCase">
                  <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-plus ui-btn-h ui-mini">General requirements
                        <div class="ui-li-count">5</div><span class="ui-collapsible-heading-status"> click to expand contents</span></a></h3>
                  <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h">Execute tests that apply for all metadata records on elements that are directly child elements of the root node of the XML document: MD_Metadata node.<br><br><table>
                        <tbody>
                           <tr>
                              <td>Status</td>
                              <td>Passed</td>
                           </tr>
                           <tr>
                              <td>Duration</td>
                              <td>4 s</td>
                           </tr>
                           <tr class="ReportDetail">
                              <td>Test case ID</td>
                              <td>EID61e7ffc0-c181-11e8-a355-529269fb1459</td>
                           </tr>
                        </tbody>
                     </table><br><div class="TestStepPlaceHolder">
                        <div data-role="collapsible" data-enhanced="true" id="EIDa19b4830-334a-4880-8873-5077b6369680" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.1: XML Schema<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Performs a schema validation of the document.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/xml-schema" target="_blank">XML Schema</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>4 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID7c93c4d2-3942-4eb4-b5d3-4735d40262d8</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDa19b4830-334a-4880-8873-5077b6369680" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDa19b4830-334a-4880-8873-5077b6369680'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDa19b4830-334a-4880-8873-5077b6369680.expression">Expression:</label><textarea id="EIDa19b4830-334a-4880-8873-5077b6369680.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages :=    
										(for $record in $records
										let $rid := $record/gmd:fileIdentifier/*/text()
										let $result_0 := try{ validate:xsd($record, 'http://schemas.opengis.net/csw/2.0.2/profiles/apiso/1.0.0/apiso.xsd') } catch * {  $err:description }
										let $result_1 := try{ 
											if (not(string-length($result_0) = 0)) then validate:xsd($record, 'http://www.isotc211.org/2005/gmd/gmd.xsd')
											else ()
										} catch * {  $err:description }
										let $result_2 := try{
											if (not(string-length($result_0) = 0 and string-length($result_1) = 0)) then validate:xsd($record, 'http://schemas.opengis.net/iso/19139/20070417/gmd/gmd.xsd')
											else ()
										} catch * { $err:description }
										let $result_3 := try{
											if (not(string-length($result_0) = 0 and string-length($result_1) = 0 and string-length($result_2) = 0)) then validate:xsd($record, 'https://inspire.ec.europa.eu/draft-schemas/inspire-md-schemas-temp/iso_19139_20060504/iso_19139_20060504_wrapper.xsd')
											else ()
										} catch * { $err:description }
										return
										if(not(string-length($result_0) = 0 or string-length($result_1) = 0 or string-length($result_2) = 0 or string-length($result_3) = 0)) then
											local:addMessage('TR.errorValidatingSchema',  map { 'filename': local:filename($record), 'id': $rid, 'description': string($result_0) })
										else ()
										)[position() le $limitErrors]
									return
									(if ($messages) then 'FAILED' else 'PASSED',
									 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
									 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID696a9ebf-c9b9-48b2-8ea6-fdade14077eb" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.2: Root Element<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the specification of a metadata is encoded through a root element MD_Metadata.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/root-element" target="_blank">Root Element</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDba885e87-dfec-4206-9a94-5620af734d44</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID696a9ebf-c9b9-48b2-8ea6-fdade14077eb" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID696a9ebf-c9b9-48b2-8ea6-fdade14077eb'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID696a9ebf-c9b9-48b2-8ea6-fdade14077eb.expression">Expression:</label><textarea id="EID696a9ebf-c9b9-48b2-8ea6-fdade14077eb.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages :=
										(for $record in $records
										let $rid := $record/gmd:fileIdentifier/*/text()
										return
										if(not($record/node-name() = QName('http://www.isotc211.org/2005/gmd','gmd:MD_Metadata'))) then
											local:addMessage('TR.invalidRootElement',  map { 'filename': local:filename($record), 'id': namespace-uri($record) })
										else ()
										)[position() le $limitErrors]
									return
									(if ($messages) then 'FAILED' else 'PASSED',
									 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
									 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID31a63763-3b53-45a4-85bc-575796d1e872" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.5: Language Code<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that a resource language is given pointing to one of the official languages of the Community expressed in conformity with ISO 639-2</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/metadata-language-code" target="_blank">Metadata Language</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDebdda4b4-0bb4-4255-a36a-db4fe540065c</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID31a63763-3b53-45a4-85bc-575796d1e872" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID31a63763-3b53-45a4-85bc-575796d1e872'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID31a63763-3b53-45a4-85bc-575796d1e872.expression">Expression:</label><textarea id="EID31a63763-3b53-45a4-85bc-575796d1e872.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $recordsToInspect := $records[gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = ('dataset','series','service')]
									let $codes := ('bul', 'hrv', 'cze', 'dan', 'dut', 'eng', 'est', 'fin', 'fre', 'ger', 'gre', 'hun', 'gle', 'ice', 'ita', 'lav', 'lit', 'mlt', 'nor', 'pol', 'por', 'rum', 'slo', 'slv', 'spa', 'swe')
									let $messages :=    
										if (not($recordsToInspect)) then ()
										else
										(for $record in $recordsToInspect    
										let $rid := $record/gmd:fileIdentifier/*/text()
										let $languageCodes := $record/gmd:language/gmd:LanguageCode	 
										return
										if (not($languageCodes)) then
											local:addMessage('TR.noLanguageCode',  map { 'filename': local:filename($record), 'id': $rid })
										else if (count($languageCodes) != 1) then
											local:addMessage('TR.wrongLanguageCodeNumber',  map { 'filename': local:filename($record), 'id': $rid })
										else if ($languageCodes/@codeList != 'http://www.loc.gov/standards/iso639-2/' and $languageCodes/@codeList != 'https://www.loc.gov/standards/iso639-2/' and $languageCodes/@codeList != 'http://www.loc.gov/standards/iso639-2' and $languageCodes/@codeList != 'https://www.loc.gov/standards/iso639-2'and $languageCodes/@codeList != 'http://id.loc.gov/vocabulary/iso639-2/' and $languageCodes/@codeList != 'https://id.loc.gov/vocabulary/iso639-2/' and $languageCodes/@codeList != 'http://id.loc.gov/vocabulary/iso639-2' and $languageCodes/@codeList != 'https://id.loc.gov/vocabulary/iso639-2') then
											local:addMessage('TR.wrongCodeList_Param',  map { 'filename': local:filename($record), 'id': $rid, 'param': 'http://www.loc.gov/standards/iso639-2/ or http://id.loc.gov/vocabulary/iso639-2'})
										else if ($languageCodes/@codeListValue[not(. = $codes)]) then
											local:addMessage('TR.invalidLanguageCode',  map { 'filename': local:filename($record), 'id': $rid, 'invalidCodes' : $languageCodes/@codeListValue/string()})
										else ()
										)[position() le $limitErrors]
									return
									(if ($messages) then 'FAILED' else 'PASSED',
									 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
									 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EIDfeba1b60-6b7f-4ff7-a14b-5b6eb57cc9fd" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.6: Metadata Point of Contact<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the description of the organisation responsible for the creation and maintenance of the metadata is provided.</p>
										<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/md-point-of-contact" target="_blank">Metadata Point of Contact</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDead447bf-7ace-4b13-b9b1-a80f8566c9cb</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDfeba1b60-6b7f-4ff7-a14b-5b6eb57cc9fd" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDfeba1b60-6b7f-4ff7-a14b-5b6eb57cc9fd'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDfeba1b60-6b7f-4ff7-a14b-5b6eb57cc9fd.expression">Expression:</label><textarea id="EIDfeba1b60-6b7f-4ff7-a14b-5b6eb57cc9fd.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages := 
		(for $record in $records
		let $rid := $record/gmd:fileIdentifier/*/text()
		let $pocs := $record/gmd:contact/gmd:CI_ResponsibleParty
		let $iso19115_CIRoleCode := ('resourceProvider','custodian','owner','user','distributor','originator','pointOfContact','principalInvestigator','processor','publisher','author')
		let $RoleCodes := $pocs/gmd:role/gmd:CI_RoleCode
        let $pointOfContact := 
		(for $y in $RoleCodes 
			return 
		 		if ($y/@codeListValue = 'pointOfContact') then $y/@codeListValue
        		else ())

        let $invalidCodeListValues := 
		(for $y in $RoleCodes 
			return 
		 		if ($y/@codeListValue = $iso19115_CIRoleCode) then ()
        		else $y/@codeListValue)
        return
			if (not($pocs)) then 
				local:addMessage('TR.noMetadataContact', map { 'filename': local:filename($record), 'id': $rid })
            else if (count($pointOfContact) = 0) then
				local:addMessage('TR.invalidMetadataContactRoleCodeListValue', map { 'filename': local:filename($record), 'id': $rid, 'poc': '0 pointOfContact'})
			else if (not(count($invalidCodeListValues) = 0)) then
                (for $codeListValue in $invalidCodeListValues
				    return
                        local:addMessage('TR.invalidMetadataContactRoleCodeListValue', map { 'filename': local:filename($record), 'id': $rid, 'poc': fn:string($codeListValue)}))
			else
				for $poc in $pocs
					let $orgName := $poc/gmd:organisationName
					let $email := $poc/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress
					let $emptyEmail := 
						for $x in $email
							where (not(string-length($x/gco:CharacterString/text()) != 0 or string-length($x/gmx:Anchor/text()) != 0))
							return $x
					return
						if (not($orgName) or not(string-length($orgName/gco:CharacterString/text()) != 0 or string-length($orgName/gmx:Anchor/text()) != 0)) then
							local:addMessage('TR.noMetadataContactOrganisationName', map { 'filename': local:filename($record), 'id': $rid })
						else if (not($email) or count($emptyEmail) &gt; 0) then 
							local:addMessage('TR.noMetadataContactEmailAddress', map { 'filename': local:filename($record), 'id': $rid })
						else if (not($poc/gmd:role)) then
							local:addMessage('TR.noMetadataContactRole', map { 'filename': local:filename($record), 'id': $rid})
						else ()
		)[position() le $limitErrors]
	return
	(if ($messages) then 'FAILED' else 'PASSED',
	 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
	 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EIDf03a7fa2-8bd1-4080-a3a8-f9d3fed251a5" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.7: Metadata Date<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the document indicates the date when the metadata record was created or updated.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/md-date" target="_blank">Metadata Date</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.034 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID0b6c9678-31d1-4c7a-8183-6a4f4da60017</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDf03a7fa2-8bd1-4080-a3a8-f9d3fed251a5" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDf03a7fa2-8bd1-4080-a3a8-f9d3fed251a5'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDf03a7fa2-8bd1-4080-a3a8-f9d3fed251a5.expression">Expression:</label><textarea id="EIDf03a7fa2-8bd1-4080-a3a8-f9d3fed251a5.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $levels := ('dataset', 'series', 'service')
let $recordsToInspect := $records[gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = $levels]
let $regexDate := '(^([0-9]{2})$)|(^([0-9]{4})$)|(^([0-9]{4})-(1[0-2]|0[1-9])$)|((^[0-9]{4}-(0[13-9]|1[0-2])-(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}-(0[13578]|1[02])-31$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29$)|(^(([02468][048])|([13579][26]))00-02-29$))|((^[0-9]{4}(0[13-9]|1[0-2])(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}(0[13578]|1[02])31$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229$)|(^(([02468][048])|([13579][26]))000229$))|((^[0-9]{4}-(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-366$)|(^(([02468][048])|([13579][26]))00-366$))|((^[0-9]{4}(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))366$)|(^(([02468][048])|([13579][26]))00366$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53$))|((^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])$))|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])-[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53-[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53-[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53-[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53-[1-7]$))|(^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53[1-7]$))'
let $regexDateTime := '((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}-02-([01][0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))-06-30T23:59:60((\.|,)0+)?Z$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))-12-31T23:59:60((\.|,)0+)?Z$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}02([01][0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))0630T235960((\.|,)0+)?Z$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))1231T235960((\.|,)0+)?Z$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}-02-([01][0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))-06-30T23:59:60((\.|,)0+)?$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))-12-31T23:59:60((\.|,)0+)?$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9][0-5][0-9]$)|(^[0-9]{4}02([01][0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))0630T235960((\.|,)0+)?$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))1231T235960((\.|,)0+)?$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$))'
let $messages :=
	(for $record in $recordsToInspect
	let $rid := $record/gmd:fileIdentifier/*/text()
	return
		if (count($record/gmd:dateStamp) != 1 or not(count($record/gmd:dateStamp/gco:DateTime) + count($record/gmd:dateStamp/gco:Date) = 1)) then
			local:addMessage('TR.oneDateStamp', map { 'filename': local:filename($record), 'id': $rid })
		else if(count($record/gmd:dateStamp/gco:DateTime) = 1) then
			if (not(matches($record/gmd:dateStamp/gco:DateTime, $regexDateTime))) then
				local:addMessage('TR.wrongDateFormat', map { 'filename': local:filename($record), 'id': $rid })
			else()
		else if(count($record/gmd:dateStamp/gco:Date) = 1) then
			if (not(matches($record/gmd:dateStamp/gco:Date, $regexDate))) then
				local:addMessage('TR.wrongDateFormat', map { 'filename': local:filename($record), 'id': $rid })
			else()
		else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div data-role="collapsible" data-enhanced="true" id="EID61e80286-c181-11e8-a355-529269fb1459" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed TestCase SuccessfulTestCase">
                  <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-plus ui-btn-h ui-mini">Identification
                        <div class="ui-li-count">12</div><span class="ui-collapsible-heading-status"> click to expand contents</span></a></h3>
                  <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h">Execute tests that apply for all metadata records on elements that are child elements of the section of the XML document: Identification Info (property of the gmd:MD_Metadata element). This section contains information specific to the dataset / dataset series.<br><br><table>
                        <tbody>
                           <tr>
                              <td>Status</td>
                              <td>Passed</td>
                           </tr>
                           <tr>
                              <td>Duration</td>
                              <td>0.202 s</td>
                           </tr>
                           <tr class="ReportDetail">
                              <td>Test case ID</td>
                              <td>EID61e80286-c181-11e8-a355-529269fb1459</td>
                           </tr>
                        </tbody>
                     </table><br><div class="TestStepPlaceHolder">
                        <div data-role="collapsible" data-enhanced="true" id="EIDf141cb76-260f-4619-99a4-06daee0a2060" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.8: Resource Title<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that a non-empty title of the described data is provided.</p>
								<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/resource-title" target="_blank">Resource Title</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID34195fe7-0d77-46bb-b74e-489463cadd2f</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDf141cb76-260f-4619-99a4-06daee0a2060" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDf141cb76-260f-4619-99a4-06daee0a2060'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDf141cb76-260f-4619-99a4-06daee0a2060.expression">Expression:</label><textarea id="EIDf141cb76-260f-4619-99a4-06daee0a2060.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages :=
	(for $record in $records
	let $rid := $record/gmd:fileIdentifier/*/text()
	let $title := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:citation/gmd:CI_Citation/gmd:title
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:title
	let $rid := $record/gmd:fileIdentifier/*/text()
	return
		if (not($title)) then
			local:addMessage('TR.noTitle', map { 'filename': local:filename($record), 'id': $rid })
		else if (count($title) != 1) then
			local:addMessage('TR.noTitle', map { 'filename': local:filename($record), 'id': $rid })
        else if (not($title) or not(string-length($title/gco:CharacterString) != 0 or string-length($title/gmx:Anchor) != 0)) then
			local:addMessage('TR.emptyTitle', map { 'filename': local:filename($record), 'id': $rid })
		else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID359431fd-3314-4a36-9d9a-ff8276c61e16" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.9: Resource Abstract<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that a resource abstract is provided.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/resource-abstract" target="_blank">Resource Abstract</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID346ca433-1f21-4e4e-8fec-524d24fd6647</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID359431fd-3314-4a36-9d9a-ff8276c61e16" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID359431fd-3314-4a36-9d9a-ff8276c61e16'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID359431fd-3314-4a36-9d9a-ff8276c61e16.expression">Expression:</label><textarea id="EID359431fd-3314-4a36-9d9a-ff8276c61e16.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages :=
	(
	for $record in $records
	let $rid := $record/gmd:fileIdentifier/*/text()
	let $abstract := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:abstract
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:abstract
	return
	if (not($abstract)) then
		local:addMessage('TR.noAbstract', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($abstract) != 1) then
		local:addMessage('TR.noAbstract', map { 'filename': local:filename($record), 'id': $rid })
    else if (not($abstract) or not(string-length($abstract/gco:CharacterString) != 0 or string-length($abstract/gmx:Anchor) != 0)) then
		local:addMessage('TR.emptyAbstract', map { 'filename': local:filename($record), 'id': $rid })
	else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID3c0b5ad7-f1f3-49e2-ae71-d7e166bfe206" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.10: Responsible Organization<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the responsible organization metadata is provided</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/responsible-organisation" target="_blank">Responsible Organization</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.013 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID87ee2219-2ba5-4a27-91ac-2b3bf5730012</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID3c0b5ad7-f1f3-49e2-ae71-d7e166bfe206" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID3c0b5ad7-f1f3-49e2-ae71-d7e166bfe206'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID3c0b5ad7-f1f3-49e2-ae71-d7e166bfe206.expression">Expression:</label><textarea id="EID3c0b5ad7-f1f3-49e2-ae71-d7e166bfe206.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $iso19115_CIRoleCode := ('resourceProvider','custodian','owner','user','distributor','originator','pointOfContact','principalInvestigator','processor','publisher','author')
let $messages := 
		(for $record in $records
		 let $rid := $record/gmd:fileIdentifier/*/text()
		 let $pocs := 
			if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			    $record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:pointOfContact/gmd:CI_ResponsibleParty
			else
			    $record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:pointOfContact/gmd:CI_ResponsibleParty
		 return
		    if(not($pocs)) then
		 	    local:addMessage('TR.missingResponsibleParty', map { 'filename': local:filename($record), 'id': $rid })
		    else
				for $poc in $pocs
				let $orgName := $poc/gmd:organisationName
				let $email := 
				    for $y in $poc/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address
                    return $y/gmd:electronicMailAddress
				let $emailChar := 
					for $y in $poc/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress
                    		return
						if ($y/gco:CharacterString/text() != '') then
							 $y
						else ()
				let $emailAnc := 
					for $y in $poc/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress
                    		return
						if ($y/gmx:Anchor/text() != '') then
							 $y
						else ()
			let $a := local:log('Email Char: ' || count($emailChar))
		    let $b := local:log('Email Anch: ' || count($emailAnc))

				return
                    if (not($orgName) or not(string-length($orgName/gco:CharacterString/text()) != 0 or string-length($orgName/gmx:Anchor/text()) != 0)) then
					    local:addMessage('TR.noMetadataContactOrganisationName', map { 'filename': local:filename($record), 'id': $rid })
                    else if (count($email) = 0 or count($emailChar) + count($emailAnc) != count($email)) then
					    local:addMessage('TR.noMetadataContactEmailAddress', map { 'filename': local:filename($record), 'id': $rid })
				    else if (not($poc/gmd:role) or not($poc/gmd:role/gmd:CI_RoleCode/@codeListValue = $iso19115_CIRoleCode)) then
					    local:addMessage('TR.noPointOfContactRole', map { 'filename': local:filename($record), 'id': $rid })
				    else ()
		)[position() le $limitErrors]
	return
	(if ($messages) then 'FAILED' else 'PASSED',
	 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
	 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID9aea6a92-d962-4924-9d6d-d76b63c53940" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.11: Temporal Reference<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that there is at least one temporal reference and it is codified correctly.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/temporal-reference" target="_blank">Temporal Reference</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.018 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID01ae1fe1-1990-4716-ae09-88d1208b408c</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID9aea6a92-d962-4924-9d6d-d76b63c53940" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID9aea6a92-d962-4924-9d6d-d76b63c53940'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID9aea6a92-d962-4924-9d6d-d76b63c53940.expression">Expression:</label><textarea id="EID9aea6a92-d962-4924-9d6d-d76b63c53940.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $regexDate := '(^([0-9]{2})$)|(^([0-9]{4})$)|(^([0-9]{4})-(1[0-2]|0[1-9])$)|((^[0-9]{4}-(0[13-9]|1[0-2])-(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}-(0[13578]|1[02])-31$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29$)|(^(([02468][048])|([13579][26]))00-02-29$))|((^[0-9]{4}(0[13-9]|1[0-2])(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}(0[13578]|1[02])31$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229$)|(^(([02468][048])|([13579][26]))000229$))|((^[0-9]{4}-(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-366$)|(^(([02468][048])|([13579][26]))00-366$))|((^[0-9]{4}(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))366$)|(^(([02468][048])|([13579][26]))00366$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53$))|((^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])$))|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])-[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53-[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53-[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53-[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53-[1-7]$))|(^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53[1-7]$))'
let $regexDateTime := '((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}-02-([01][0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))-06-30T23:59:60((\.|,)0+)?Z$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))-12-31T23:59:60((\.|,)0+)?Z$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}02([01][0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))0630T235960((\.|,)0+)?Z$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))1231T235960((\.|,)0+)?Z$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}-02-([01][0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))-06-30T23:59:60((\.|,)0+)?$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))-12-31T23:59:60((\.|,)0+)?$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9][0-5][0-9]$)|(^[0-9]{4}02([01][0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))0630T235960((\.|,)0+)?$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))1231T235960((\.|,)0+)?$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$))'


let $messages := 
	(for $record in $records
	let $rid := $record/gmd:fileIdentifier/*/text()
	let $ci_dates := $record/gmd:identificationInfo[1]/*/gmd:citation/gmd:CI_Citation/gmd:date/gmd:CI_Date
	return
	(if(not($ci_dates/gmd:date)) then
		local:addMessage('TR.noRelevantDate', map { 'filename': local:filename($record), 'id': $rid })
	else 
		for $ci_date in $ci_dates
		let $dateType := $ci_date/gmd:dateType/gmd:CI_DateTypeCode
		return
		if (not($ci_date/gmd:date/gco:Date or $ci_date/gmd:date/gco:DateTime)) then
			local:addMessage('TR.noRelevantDate', map { 'filename': local:filename($record), 'id': $rid })
		else if ($ci_date/gmd:date/gco:Date and not(matches($ci_date/gmd:date/gco:Date/text(),$regexDate))) then
			local:addMessage('TR.invalidDateFormat', map { 'filename': local:filename($record), 'id': $rid }) 
		else if ($ci_date/gmd:date/gco:DateTime and not(matches($ci_date/gmd:date/gco:DateTime/text(),$regexDateTime))) then
			local:addMessage('TR.wrongDateFormat', map { 'filename': local:filename($record), 'id': $rid })
		else if (not($dateType)) then
			local:addMessage('TR.noDateType', map { 'filename': local:filename($record), 'id': $rid })
		else if (not($dateType/@codeListValue = ('publication','revision','creation'))) then
			local:addMessage('TR.noDateTypeForSpecification', map { 'filename': local:filename($record), 'id': $rid })
		else())
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EIDabf30f27-4f6e-4ae8-a0fc-7fa01d5cf9df" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.12: Max One Date of Creation<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that not more than one date of creation for the metadata is given</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/max-1-date-of-creation" target="_blank">Max One Date of Creation</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID109cce73-7e80-432e-a3e0-450e231f4120</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDabf30f27-4f6e-4ae8-a0fc-7fa01d5cf9df" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDabf30f27-4f6e-4ae8-a0fc-7fa01d5cf9df'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDabf30f27-4f6e-4ae8-a0fc-7fa01d5cf9df.expression">Expression:</label><textarea id="EIDabf30f27-4f6e-4ae8-a0fc-7fa01d5cf9df.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $dt := ('CI_DateTypeCode','http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode')	
let $messages := 
	(for $record in $records
	 let $rid := $record/gmd:fileIdentifier/*/text()
	 let $temporalReferences := $record/gmd:identificationInfo[1]/*/gmd:citation/gmd:CI_Citation/gmd:date/gmd:CI_Date
	 let $creationTempRefs := $temporalReferences[gmd:dateType/*/@codeListValue = ('creation')]
	 return
 if(count($creationTempRefs) ne 1 and count($creationTempRefs) ne 0) then
		local:addMessage('TR.moreThanOneCreationDate', map { 'filename': local:filename($record), 'id': $rid })
	 else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EIDccb4626d-d8a5-490b-951c-8353bda10858" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.13: Not More than one Date of Last Revision<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that not more than one date of last revision for the metadata is given.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/max-1-date-of-last-revision" target="_blank">Max one Date of Last Revision</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID6b4e043c-7624-4b3c-8b0c-bec547d2f8f6</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDccb4626d-d8a5-490b-951c-8353bda10858" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDccb4626d-d8a5-490b-951c-8353bda10858'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDccb4626d-d8a5-490b-951c-8353bda10858.expression">Expression:</label><textarea id="EIDccb4626d-d8a5-490b-951c-8353bda10858.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $dt := ('CI_DateTypeCode','http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode')	
let $messages := 
	(for $record in $records
	 let $rid := $record/gmd:fileIdentifier/*/text()
	 let $temporalReferences := $record/gmd:identificationInfo[1]/*/gmd:citation/gmd:CI_Citation/gmd:date/gmd:CI_Date
	 let $revisionTempRefs := $temporalReferences[gmd:dateType/*/@codeListValue = ('revision')]
	 return
 if(count($revisionTempRefs) ne 1 and count($revisionTempRefs) ne 0) then
		local:addMessage('TR.moreThanOneRevisionDate', map { 'filename': local:filename($record), 'id': $rid })
	 else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EIDe2de8e32-9c82-46e3-9565-9a6e9adda670" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.14: Temporal Extent<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test if a temporal reference is provided using the temporary extension. The temporal reference will be coded using an individual date or a period of time between two dates.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/temporal-extent" target="_blank">Temporal Extent</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.171 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID76f8fb3a-c00f-11e8-a355-529269fb1459</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDe2de8e32-9c82-46e3-9565-9a6e9adda670" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDe2de8e32-9c82-46e3-9565-9a6e9adda670'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDe2de8e32-9c82-46e3-9565-9a6e9adda670.expression">Expression:</label><textarea id="EIDe2de8e32-9c82-46e3-9565-9a6e9adda670.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages := 
	(for $record in $records
	 let $rid := $record/gmd:fileIdentifier/*/text()

	let $regex := '(^([0-9]{2})$)|(^([0-9]{4})$)|(^([0-9]{4})-(1[0-2]|0[1-9])$)|((^[0-9]{4}-(0[13-9]|1[0-2])-(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}-(0[13578]|1[02])-31$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29$)|(^(([02468][048])|([13579][26]))00-02-29$))|((^[0-9]{4}(0[13-9]|1[0-2])(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}(0[13578]|1[02])31$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229$)|(^(([02468][048])|([13579][26]))000229$))|((^[0-9]{4}-(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-366$)|(^(([02468][048])|([13579][26]))00-366$))|((^[0-9]{4}(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))366$)|(^(([02468][048])|([13579][26]))00366$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53$))|((^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])$))|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])-[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53-[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53-[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53-[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53-[1-7]$))|(^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53[1-7]$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}-02-([01][0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))-06-30T23:59:60((\.|,)0+)?Z$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))-12-31T23:59:60((\.|,)0+)?Z$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}02([01][0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))0630T235960((\.|,)0+)?Z$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))1231T235960((\.|,)0+)?Z$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}-02-([01][0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))-06-30T23:59:60((\.|,)0+)?$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))-12-31T23:59:60((\.|,)0+)?$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9][0-5][0-9]$)|(^[0-9]{4}02([01][0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))0630T235960((\.|,)0+)?$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))1231T235960((\.|,)0+)?$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$))'
	 let $temporalExtentextents := $record/gmd:identificationInfo[1]/*/*:extent/gmd:EX_Extent/gmd:temporalElement/gmd:EX_TemporalExtent/gmd:extent
	 return
	 	for $extent in $temporalExtentextents
			let $timePosition := $extent/*:TimeInstant/*:timePosition
			let $timePeriod := $extent/*:TimePeriod
			let $beginPosition := $extent/*:TimePeriod/*:beginPosition
			let $endPosition := $extent/*:TimePeriod/*:endPosition
			return
		if ($timePosition) then
			if (not($timePosition/@indeterminatePosition)  and not(matches($timePosition/text(), $regex))) then
				local:addMessage('TR.wrongDateFormat', map { 'filename': local:filename($record), 'id': $rid })
			else if($timePosition/@indeterminatePosition and not($timePosition/@indeterminatePosition = 'unknown' or $timePosition/@indeterminatePosition = 'now')) then
				local:addMessage('TR.wrongTimeIndeterminatePosition', map { 'filename': local:filename($record), 'id': $rid })
			else ()
		else if($timePeriod) then
			if (not($beginPosition/@indeterminatePosition) and not(matches($beginPosition/text(), $regex))) then
				local:addMessage('TR.wrongDateFormat', map { 'filename': local:filename($record), 'id': $rid })
			else if ($beginPosition/@indeterminatePosition and not($beginPosition/@indeterminatePosition = 'unknown' or $beginPosition/@indeterminatePosition = 'before' or $beginPosition/@indeterminatePosition = 'now' or $beginPosition/@indeterminatePosition = 'after')) then
				local:addMessage('TR.wrongIndeterminatePosition', map { 'filename': local:filename($record), 'id': $rid })
			else if (not($endPosition/@indeterminatePosition) and not(matches($endPosition/text(), $regex))) then
				local:addMessage('TR.wrongDateFormat', map { 'filename': local:filename($record), 'id': $rid })
			else if ($endPosition/@indeterminatePosition and not($endPosition/@indeterminatePosition = 'unknown' or $endPosition/@indeterminatePosition = 'now' or $endPosition/@indeterminatePosition = 'before' or $endPosition/@indeterminatePosition = 'after')) then
				local:addMessage('TR.wrongIndeterminatePosition', map { 'filename': local:filename($record), 'id': $rid })
			else ()
		else
			local:addMessage('TR.noTimePositionOrPeriod', map { 'filename': local:filename($record), 'id': $rid })
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EIDa084885c-d379-4c44-9a32-a3e18eeb29ae" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.15: Keyword Originating CV<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the citation of the source controlled vocabulary when giving the value of a keyword is provided correctly.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/keyword-originating-cv" target="_blank">Keyword Originating CV</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID76f8ff36-c00f-11e8-a355-529269fb1459</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDa084885c-d379-4c44-9a32-a3e18eeb29ae" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDa084885c-d379-4c44-9a32-a3e18eeb29ae'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDa084885c-d379-4c44-9a32-a3e18eeb29ae.expression">Expression:</label><textarea id="EIDa084885c-d379-4c44-9a32-a3e18eeb29ae.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $regex := '(^([0-9]{2})$)|(^([0-9]{4})$)|(^([0-9]{4})-(1[0-2]|0[1-9])$)|((^[0-9]{4}-(0[13-9]|1[0-2])-(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}-(0[13578]|1[02])-31$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29$)|(^(([02468][048])|([13579][26]))00-02-29$))|((^[0-9]{4}(0[13-9]|1[0-2])(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}(0[13578]|1[02])31$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229$)|(^(([02468][048])|([13579][26]))000229$))|((^[0-9]{4}-(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-366$)|(^(([02468][048])|([13579][26]))00-366$))|((^[0-9]{4}(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))366$)|(^(([02468][048])|([13579][26]))00366$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53$))|((^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])$))|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])-[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53-[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53-[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53-[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53-[1-7]$))|(^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53[1-7]$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}-02-([01][0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?Z$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))-06-30T23:59:60((\.|,)0+)?Z$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))-12-31T23:59:60((\.|,)0+)?Z$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{4}02([01][0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?Z$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))0630T235960((\.|,)0+)?Z$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))1231T235960((\.|,)0+)?Z$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}-02-([01][0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))-06-30T23:59:60((\.|,)0+)?$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))-12-31T23:59:60((\.|,)0+)?$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9][0-5][0-9]$)|(^[0-9]{4}02([01][0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?$))|((^((19(8[1-35]|9[2-47]))|(20(1[25])))0630T235960((\.|,)0+)?$)|(^((19(7[1-9]|8[79]|9[058]))|(20(0[58]|16)))1231T235960((\.|,)0+)?$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4]))):00)|(((-0[39])|(\+(0[3-6]|10))):30)|((\+(0[58]|12)):45))$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))00)|(((-0[39])|(\+(0[3-6]|10)))30)|((\+(0[58]|12))45))$))|((^[0-9]{4}-(0[13-9]|1[0-2])-((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}-(0[13578]|1[02])-31T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^(([02468][048])|([13579][26]))00-02-29T([01][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$))|((^[0-9]{4}(0[13-9]|1[0-2])((0[1-9]|[12][0-9]|30))T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}(0[13578]|1[02])31T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$)|(^(([02468][048])|([13579][26]))000229T([01][0-9]|2[0-3])[0-5][0-9]([0-5][0-9])?((\.|,)[0-9]+)?((-(0[1-9]|1[0-2]))|(\+(0[0-9]|1[0-4])))$))'

let $messages := 
	(for $record in $records
	 let $rid := $record/gmd:fileIdentifier/*/text()
	 let $thesauri := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:thesaurusName
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:thesaurusName
	 return
	 if(not($thesauri)) then ()
	 else for $thesaurus in $thesauri
	 let $title := $thesaurus/gmd:CI_Citation/gmd:title
	 let $keywords := string-join($thesaurus/../gmd:keyword/*[1]/text(), '; ')
	 let $date := $thesaurus/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date
	 let $dateTypeCode := $thesaurus/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/gmd:CI_DateTypeCode
	 return 
	 	if (not($title)) then local:addMessage('TR.noTitleForThesaurus', map { 'filename': local:filename($record), 'id': $rid})
        else if (not(string-length($title/gco:CharacterString/text()) != 0 or string-length($title/gmx:Anchor/text()) != 0)) then local:addMessage('TR.emptyTitleForThesaurus', map { 'filename': local:filename($record), 'id': $rid})
		else if (not($date)) then local:addMessage('TR.invalidDateForThesaurus2', map { 'filename': local:filename($record), 'id': $rid, 'thesaurus': $title/*/text(), 'keywords' : $keywords})
	 	else if (not($dateTypeCode) or not($dateTypeCode/@codeListValue = ('publication', 'revision', 'creation'))) then local:addMessage('TR.invalidDateForThesaurus2', map { 'filename': local:filename($record), 'id': $rid, 'thesaurus': $title/*/text(), 'keywords' : $keywords})
		else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID57708cb7-0095-4a97-85b3-e01701839cbf" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.16: Group Keywords by CV<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that a Keywords element only contain keywords originating from the one cited controlled vocabulary, or its version.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/group-keywords-by-cv" target="_blank">Group Keywords by CV</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID76f901ca-c00f-11e8-a355-529269fb1459</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID57708cb7-0095-4a97-85b3-e01701839cbf" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID57708cb7-0095-4a97-85b3-e01701839cbf'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID57708cb7-0095-4a97-85b3-e01701839cbf.expression">Expression:</label><textarea id="EID57708cb7-0095-4a97-85b3-e01701839cbf.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages := 
	(for $record in $records
	 let $rid := $record/gmd:fileIdentifier/*/text()
	 let $keywords := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:descriptiveKeywords
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords
	 let $thesaurusNameTitle := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title
	 return
	 if (count($thesaurusNameTitle) != count(distinct-values($thesaurusNameTitle))) then
	   local:addMessage('TR.keywordsNotGroupedByVocabulary', map { 'filename': local:filename($record), 'id': $rid })
	 else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID188cb093-92e3-40b8-8cd4-c906442635bb" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.17: Limitations on Public Access<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that information on the existence of some limitation of public access to spatial data sets and spatial data services is provided.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/limitations-on-public-access" target="_blank">Limitations on Public Access</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDf7e5c9d6-7a5c-47cc-9c95-1d4f3a5f92eb</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID188cb093-92e3-40b8-8cd4-c906442635bb" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID188cb093-92e3-40b8-8cd4-c906442635bb'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID188cb093-92e3-40b8-8cd4-c906442635bb.expression">Expression:</label><textarea id="EID188cb093-92e3-40b8-8cd4-c906442635bb.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages :=
	(for $record in $records
		let $rid := $record/gmd:fileIdentifier/*/text()
		let $md_legalConstraints_Limitations :=
			for $x in $record/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints where (count($x/gmd:accessConstraints) != 0)
				let $validAccessConstraints :=
					for $ac in $x/gmd:accessConstraints
						where ($ac/gmd:MD_RestrictionCode/@codeListValue = 'otherRestrictions')
						return $ac
				let $otherConstraintsAnchor := 
					for $oc in $x/gmd:otherConstraints
						where (exists($oc/gmx:Anchor)) 
						return $oc/gmx:Anchor
				let $validAnchor :=
					for $y in $otherConstraintsAnchor
                       where (starts-with($y/@xlink:href, 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess'))
						return
						if ($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1a' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1b' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1c' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1d' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1e' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1f' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1g' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1h' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/noLimitations') then $y
						else ()
				let $invalidLimitationsAnchor :=
					for $y in $otherConstraintsAnchor
                       where (starts-with($y/@xlink:href, 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess'))
							return
								if (not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1a') and
									not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1b') and
									not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1c') and
									not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1d') and
									not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1e') and
									not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1f') and
									not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1g') and
									not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1h') and
									not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/noLimitations'))
										then $y
								else()

				let $invalidAnchor :=
					for $y in $otherConstraintsAnchor
						where ($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown')
						return $y
				
						return
						if(count($validAnchor) &gt;= 1 and count($validAccessConstraints) = 1 and count($invalidAnchor) = 0 and count($invalidLimitationsAnchor) = 0) then $x
						else ()

			let $invalidURI :=
				for $iu in $record/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints/gmx:Anchor
					where (starts-with($iu/@xlink:href, 'https://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess'))
					return $iu
		return
			if(count($invalidURI) != 0) then
				local:addMessage('TR.invalidHttpsUri', map { 'filename': local:filename($record), 'id': $rid, 'type': 'LimitationsOnPublicAccess'})								
			else if (count($md_legalConstraints_Limitations) = 0) then
				local:addMessage('TR.noResourceLimitations', map { 'filename': local:filename($record), 'id': $rid })
			else if (count($md_legalConstraints_Limitations) != 1) then
				local:addMessage('TR.noValidResourceLimitations', map { 'filename': local:filename($record), 'id': $rid })
			else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID1a865112-ba4c-47ac-887c-e7a7974a9565" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.18: Conditions for Access and Use<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test the technical restrictions of access and use of spatial data sets and services.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/conditions-for-access-and-use" target="_blank">Conditions for Access and Use</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID410b57a6-0314-4506-9352-19042f1723cd</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID1a865112-ba4c-47ac-887c-e7a7974a9565" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID1a865112-ba4c-47ac-887c-e7a7974a9565'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID1a865112-ba4c-47ac-887c-e7a7974a9565.expression">Expression:</label><textarea id="EID1a865112-ba4c-47ac-887c-e7a7974a9565.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages :=
	(for $record in $records
		let $rid := $record/gmd:fileIdentifier/*/text()

		let $md_legalConstraints_Limitations :=
			for $x in $record/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints where (count($x/gmd:accessConstraints) != 0)
				let $validAccessConstraints :=
					for $ac in $x/gmd:accessConstraints
						where ($ac/gmd:MD_RestrictionCode/@codeListValue = 'otherRestrictions')
						return $ac
				let $otherConstraintsAnchor := 
					for $oc in $x/gmd:otherConstraints
						where (exists($oc/gmx:Anchor)) 
						return $oc/gmx:Anchor
				let $validAnchor :=
					for $y in $otherConstraintsAnchor
                       where (starts-with($y/@xlink:href, 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess'))
						return 
						if($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1a' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1b' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1c' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1d' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1e' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1f' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1g' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1h' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/noLimitations') then $y
						else ()

				let $invalidAnchor :=
					for $y in $otherConstraintsAnchor
						where ($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown')
						return $y
				return
					if(count($validAnchor) &gt;= 1 and count($validAccessConstraints) = 1) then $x
					else ()
		let $md_legalConstraints_Conditions :=
			for $x in $record/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints
				let $validAccessConstraints :=
					for $ac in $x/gmd:accessConstraints
						where ($ac/gmd:MD_RestrictionCode/@codeListValue = 'otherRestrictions')
						return $ac
				let $validUseConstraints :=
					for $uc in $x/gmd:useConstraints
						where ($uc/gmd:MD_RestrictionCode/@codeListValue = 'otherRestrictions')
						return $uc
				let $otherConstraintsAnchor := 
					for $oc in $x/gmd:otherConstraints
						where (exists($oc/gmx:Anchor)) 
						return $oc/gmx:Anchor
				let $validAnchor :=
					for $y in $otherConstraintsAnchor
						where ($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown')
						return $y 

				let $invalidConditionsAnchor :=
					for $y in $otherConstraintsAnchor
                       where (starts-with($y/@xlink:href, 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse'))
						return 
							if (not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply') and
								not($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown'))
								then $y
							else()
							
				
						
				let $limitationAnchor :=
					for $y in $otherConstraintsAnchor
                       where (starts-with($y/@xlink:href, 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess'))
						return
						if ($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1a' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1b' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1c' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1d' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1e' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1f' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1g' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1h' or
							$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/noLimitations') then $y
						else ()

				let $validCharacterString := 
					for $oc in $x/gmd:otherConstraints/gco:CharacterString
						where (not(string-length($oc) = 0))
							return $oc

				let $validAnchorText :=
					for $oc in $x/gmd:otherConstraints/gmx:Anchor
						return if (not(string-length($oc) = 0)) then
							 	$oc
							 else if(string-length($oc) = 0 and count($validAnchor)=1) then
							 	$oc
							 else()
						

				return
					if(count($validAccessConstraints) = 1 and (count($validAnchor) = 1 and (not(count($validCharacterString) = 0)))) then $x
					else if(count($validAccessConstraints) = 1 and (not(count($validCharacterString) = 0) or (not(count($validAnchorText) = 0) and count($invalidConditionsAnchor) = 0 and count($limitationAnchor) = 0))) then $x
					else if(count($validUseConstraints) = 1 and (count($validAnchor) = 1 or not(count($validCharacterString) = 0))) then $x
					else if(count($validUseConstraints) = 1 and (not(count($validCharacterString) = 0) or (not(count($validAnchorText) = 0) and count($invalidConditionsAnchor) = 0 and count($limitationAnchor) = 0))) then $x
					else ()
					
			
			let $conditionsConstraint :=
				for $x in $record/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints
					let $otherConstraintsAnchor := 
						for $oc in $x/gmd:otherConstraints
							where (exists($oc/gmx:Anchor)) 
							return $oc/gmx:Anchor
					let $validAnchor :=
						for $y in $otherConstraintsAnchor
							where ($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/noConditionsApply' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/conditionsUnknown')
							return $y 
					let $limitationAnchor :=
						for $y in $otherConstraintsAnchor
						   where (starts-with($y/@xlink:href, 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess'))
							return
							if ($y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1a' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1b' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1c' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1d' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1e' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1f' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1g' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/INSPIRE_Directive_Article13_1h' or
								$y/@xlink:href = 'http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/noLimitations') then $y
							else ()
					return
						if(count($validAnchor) = 1 and count($limitationAnchor) = 0) then $x
						else ()
						
				let $validAccessCodelist :=
					for $cc in $conditionsConstraint
						where ($cc/gmd:MD_RestrictionCode/@codeListValue = 'otherRestrictions')
						return $cc
				let $validUseConstraintsCodelist :=
					for $cc in $conditionsConstraint
						where ($cc/gmd:MD_RestrictionCode/@codeListValue = 'otherRestrictions')
						return $cc

			let $invalidURI :=
				for $iu in $record/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints/gmx:Anchor
					where (starts-with($iu/@xlink:href, 'https://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse'))
					return $iu
			
		return 
			if(count($invalidURI) != 0) then
				local:addMessage('TR.invalidHttpsUri', map { 'filename': local:filename($record), 'id': $rid, 'type': 'ConditionsApplyingToAccessAndUse' })								
			else if(count($md_legalConstraints_Conditions) = 0 and count($conditionsConstraint) &gt; 0 and count($validAccessCodelist) = 0 and count($validUseConstraintsCodelist) = 0) then
				local:addMessage('TR.noValidOtherRestrictionsCodelistValue', map { 'filename': local:filename($record), 'id': $rid, 'invalidElement': string($conditionsConstraint[1]/*/gmd:MD_RestrictionCode/@codeListValue) })		
			else if(count($md_legalConstraints_Conditions) = 0) then
				local:addMessage('TR.noResourceConditions', map { 'filename': local:filename($record), 'id': $rid })
			else if (count($md_legalConstraints_Conditions) != 1) then
				if (not(count($md_legalConstraints_Limitations) = 0 or count($md_legalConstraints_Limitations) = 1) and count($md_legalConstraints_Conditions) = 2) then 
					local:addMessage('TR.noValidResourceConditions', map { 'filename': local:filename($record), 'id': $rid })
				else ()
			else ()
		)[position() le $limitErrors]

return
(if ($messages) then 'FAILED' else 'PASSED',
local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
$messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID46cdc41a-7e79-43cd-a27f-99a3c999bdc6" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.19: Geographical Bounding Box<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the extent of the resource in the geographic space is specified using a geometric bounding box.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/bounding-box" target="_blank">Bounding Box</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID701be21b-1158-4055-9594-67a4e2005e38</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID46cdc41a-7e79-43cd-a27f-99a3c999bdc6" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID46cdc41a-7e79-43cd-a27f-99a3c999bdc6'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID46cdc41a-7e79-43cd-a27f-99a3c999bdc6.expression">Expression:</label><textarea id="EID46cdc41a-7e79-43cd-a27f-99a3c999bdc6.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages := 
	for $record in $records
	let $rid := $record/gmd:fileIdentifier/*/text()
	let $extents := 
    if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
		$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox
    else
        $record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:geographicElement/gmd:EX_GeographicBoundingBox
	let $regex := '^-?\d+\.\d{2,}'
	let $rid := $record/gmd:fileIdentifier/*/text()
	return
		(if (($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'dataset' or $record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'series') and not($extents)) then
		local:addMessage('TR.noGeographicBoundingBox', map { 'filename': local:filename($record), 'id': $rid })
		else
		(
		for $extent in $extents
		let $west := $extent/gmd:westBoundLongitude/gco:Decimal/text()
		let $east := $extent/gmd:eastBoundLongitude/gco:Decimal/text()
		let $south := $extent/gmd:southBoundLatitude/gco:Decimal/text()
		let $north := $extent/gmd:northBoundLatitude/gco:Decimal/text()
		return
		if (not(($west and matches($west,$regex) and fn:number($west) &gt;= -180 and fn:number($west) &lt;= 180) and
					($east and matches($east,$regex) and fn:number($east) &gt;= -180 and fn:number($east) &lt;= 180) and
					($south and matches($south,$regex) and fn:number($south) &gt;= -90 and fn:number($south) &lt;= 90) and
					($north and matches($north,$regex) and fn:number($north) &gt;= -90 and fn:number($north) &lt;= 90) and
					(fn:number($south) &lt;= fn:number($north)))) then
			local:addMessage('TR.invalidGeographicBoundingBox', map { 'filename': local:filename($record), 'id': $rid, 'west': $west, 'east': $east, 'south': $south, 'north': $north })
		else ()
		)
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div data-role="collapsible" data-enhanced="true" id="EID61e803d0-c181-11e8-a355-529269fb1459" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed TestCase SuccessfulTestCase">
                  <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-plus ui-btn-h ui-mini">Data quality
                        <div class="ui-li-count">3</div><span class="ui-collapsible-heading-status"> click to expand contents</span></a></h3>
                  <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h">Execute tests that apply for all metadata records on elements that are child 
					elements of the section of the XML document: Data Quality Information (property of the gmd:MD_Metadata element). 
					This section contains information specific to the quality and lineage (including processing steps and sources) of the 
					resource.<br><br><table>
                        <tbody>
                           <tr>
                              <td>Status</td>
                              <td>Passed</td>
                           </tr>
                           <tr>
                              <td>Duration</td>
                              <td>0.022 s</td>
                           </tr>
                           <tr class="ReportDetail">
                              <td>Test case ID</td>
                              <td>EID61e803d0-c181-11e8-a355-529269fb1459</td>
                           </tr>
                        </tbody>
                     </table><br><div class="TestStepPlaceHolder">
                        <div data-role="collapsible" data-enhanced="true" id="EID9d9e2fcb-30a0-4fe0-bede-67394bc07e72" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.20: Dataset Conformity<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the metadata includes information on the degree of conformity with the implementing rules on interoperability of spatial data sets.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/conformity" target="_blank">Dataset Conformity</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDf55f2448-c4d5-4af0-a83b-40ccd0d2a7df</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID9d9e2fcb-30a0-4fe0-bede-67394bc07e72" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID9d9e2fcb-30a0-4fe0-bede-67394bc07e72'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID9d9e2fcb-30a0-4fe0-bede-67394bc07e72.expression">Expression:</label><textarea id="EID9d9e2fcb-30a0-4fe0-bede-67394bc07e72.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $levels := ('dataset', 'series', 'service')
let $recordsToInspect := $records[gmd:hierarchyLevel/*/@codeListValue = $levels]
let $messages := 
	(for $record in $recordsToInspect
	 let $rid := $record/gmd:fileIdentifier/*/text()
	 let $confResult := $record/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
	 return 
	 if (not($confResult)) then
		local:addMessage('TR.noConformityStatement', map { 'filename': local:filename($record), 'id': $rid })
	 else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EIDa027fc27-0754-4bbd-934f-bd59ccebaea7" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.21: Dataset Conformity Specifications<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the DQ_ConformanceResult element is correctly specified through a citation of the INSPIRE Implementing Rule and a specification document or Conformance Class using CI_Citation element: including its official title and the date of publication of the document.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/conformity-specification" target="_blank">Dataset Conformity Specifications</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.022 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID1f9ddbc5-679b-44b0-bd6f-db14c9c348a9</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDa027fc27-0754-4bbd-934f-bd59ccebaea7" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDa027fc27-0754-4bbd-934f-bd59ccebaea7'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDa027fc27-0754-4bbd-934f-bd59ccebaea7.expression">Expression:</label><textarea id="EIDa027fc27-0754-4bbd-934f-bd59ccebaea7.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $regexDate := '(^([0-9]{2})$)|(^([0-9]{4})$)|(^([0-9]{4})-(1[0-2]|0[1-9])$)|((^[0-9]{4}-(0[13-9]|1[0-2])-(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}-(0[13578]|1[02])-31$)|(^[0-9]{4}-02-(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-02-29$)|(^(([02468][048])|([13579][26]))00-02-29$))|((^[0-9]{4}(0[13-9]|1[0-2])(0[1-9]|[12][0-9]|30)$)|(^[0-9]{4}(0[13578]|1[02])31$)|(^[0-9]{4}02(0[1-9]|1[0-9]|2[0-8])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))0229$)|(^(([02468][048])|([13579][26]))000229$))|((^[0-9]{4}-(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))-366$)|(^(([02468][048])|([13579][26]))00-366$))|((^[0-9]{4}(00[1-9]|0[1-9][0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])$)|(^[0-9]{2}(([2468][048])|([13579][26])|(0[48]))366$)|(^(([02468][048])|([13579][26]))00366$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53$))|((^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])$))|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53$))|(^[0-9]{4}-W(0[1-9]|[1-4][0-9]|5[0-2])-[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)-W53-[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)-W53-[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)-W53-[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)-W53-[1-7]$))|(^[0-9]{4}W(0[1-9]|[1-4][0-9]|5[0-2])[1-7]$)|((^(([02468][048])|([13579][26]))(04|09|15|20|26|32|37|43|48|54|60|65|71|76|82|88|93|99)W53[1-7]$)|(^(([02468][159])|([13579][37]))(05|11|16|22|28|33|39|44|50|56|61|67|72|78|84|89|95)W53[1-7]$)|(^(([02468][26])|([13579][048]))(01|07|12|18|24|29|35|40|46|52|57|63|68|71|80|85|91|96)W53[1-7]$)|(^(([02468][37])|([13579][159]))(03|08|14|20|25|31|36|42|48|53|59|64|70|76|81|87|92|98)W53[1-7]$))'

let $levels := ('dataset', 'series', 'service')
let $recordsToInspect := $records[gmd:hierarchyLevel/*/@codeListValue = $levels]
let $messages := 
	(for $record in $recordsToInspect
		let $rid := $record/gmd:fileIdentifier/*/text()
		let $result := $record/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
		return 
			if (not($result)) then
				local:addMessage('TR.noConformityStatement', map { 'filename': local:filename($record), 'id': $rid })
			else if (not($result/gmd:specification/gmd:CI_Citation)) then
				local:addMessage('TR.missingCitationSection', map { 'filename': local:filename($record), 'id': $rid })
			else
				(for $res in $result
				return
				if((contains($res/gmd:specification/gmd:CI_Citation/gmd:title/*/text(), '1089/2010') and ($record/gmd:hierarchyLevel/*/@codeListValue = ('dataset') or ($record/gmd:hierarchyLevel/*/@codeListValue = ('service') and $record/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType/*/text() = "other"))) or (contains($res/gmd:specification/gmd:CI_Citation/gmd:title/*/text(), '976/2009') and $record/gmd:hierarchyLevel/*/@codeListValue = ('service'))) then
					let $aaa := 'aaa'
					return
					if(not($res/gmd:specification/gmd:CI_Citation)) then
						local:addMessage('TR.noCitationForSpecification', map { 'filename': local:filename($record), 'id': $rid })
					else
						for $citation in $res/gmd:specification/gmd:CI_Citation
							let $title := $citation/gmd:title
							let $date := $citation/gmd:date
							let $dateTypeCode := $citation/gmd:date/gmd:CI_Date/gmd:dateType/gmd:CI_DateTypeCode
							return
							if (not($title) or not(string-length($title/gco:CharacterString) != 0 or string-length($title/gmx:Anchor) != 0)) then
								local:addMessage('TR.noTitleForSpecification', map { 'filename': local:filename($record), 'id': $rid })
							else if ($title/gmd:PT_FreeText) then
								for $localisedCharacterString in $title/gmd:PT_FreeText/gmd:textGroup/gmd:LocalisedCharacterString
									return
									if (string-length($localisedCharacterString) = 0) then
										local:addMessage('TR.emptyFreeText', map{'filename': local:filename($record), 'id': $rid, 'path': '/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult/gmd:specification/gmd:CI_Citation/$citation/gmd:title/gmd:PT_FreeText'})
									else ()
							else if (not($date)) then
								local:addMessage('TR.noDateTypeForSpecification', map { 'filename': local:filename($record), 'id': $rid })
							else if (not($dateTypeCode)) then
								local:addMessage('TR.noDateTypeForSpecification', map { 'filename': local:filename($record), 'id': $rid })
							else if (not($dateTypeCode/@codeListValue = ('publication', 'creation', 'revision'))) then
								local:addMessage('TR.noDateTypeForSpecification', map { 'filename': local:filename($record), 'id': $rid })
							else if (exists($date/gmd:CI_Date/gmd:date/gco:Date/text())) then
								let $dummy := "aaa"
								for $dat in $date/gmd:CI_Date/gmd:date/gco:Date/text()
									return
									if (not(matches($dat, $regexDate))) then	
										local:addMessage('TR.invalidDateFormat', map { 'filename': local:filename($record), 'id': $rid})
									else ()
							else()
				else ())
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID37f199f5-cfe5-44ce-a479-127f1e72c692" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md common req C.22: Conformity Degree<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that each Conformance Result includes the degree of declared conformity against this specification using a property with value "true" for a conformant resource and "false" for non-conformant resource.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/conformity-degree" target="_blank">Conformity Degree</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID614cd750-a8a2-4256-908c-e452c2b4e506</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID37f199f5-cfe5-44ce-a479-127f1e72c692" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID37f199f5-cfe5-44ce-a479-127f1e72c692'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID37f199f5-cfe5-44ce-a479-127f1e72c692.expression">Expression:</label><textarea id="EID37f199f5-cfe5-44ce-a479-127f1e72c692.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages := 
	(for $record in $records
	 let $rid := $record/gmd:fileIdentifier/*/text()
	 let $result := $record/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
	 return 
	 if (not($result)) then
		local:addMessage('TR.noConformityStatement', map { 'filename': local:filename($record), 'id': $rid })
	 else
	 	(for $res in $result
		 return
			if((contains($res/gmd:specification/gmd:CI_Citation/gmd:title/*/text(), '1089/2010') and ($record/gmd:hierarchyLevel/*/@codeListValue = ('dataset') or ($record/gmd:hierarchyLevel/*/@codeListValue = ('service') and $record/gmd:identificationInfo/srv:SV_ServiceIdentification/srv:serviceType/*/text() = "other"))) or (contains($res/gmd:specification/gmd:CI_Citation/gmd:title/*/text(), '976/2009') and $record/gmd:hierarchyLevel/*/@codeListValue = ('service'))) then
				let $pass := $res/gmd:pass
				return
				if ($pass) then
					if($pass/gco:Boolean) then
						if (not($pass/gco:Boolean/text() = 'true' or $pass/gco:Boolean/text() = 'false')) then
							local:addMessage('TR.declareNoConformityEvaluationAsUnknown', map { 'filename': local:filename($record), 'id': $rid })
						else ()
					else if (not($pass/@gco:nilReason)) then
						local:addMessage('TR.declareNoConformityEvaluationAsUnknown', map { 'filename': local:filename($record), 'id': $rid })
					else if (not($pass/@gco:nilReason = 'unknown')) then
						local:addMessage('TR.declareNoConformityEvaluationAsUnknown', map { 'filename': local:filename($record), 'id': $rid })
					else ()
				else 
					local:addMessage('TR.declareNoConformityEvaluationAsUnknown', map { 'filename': local:filename($record), 'id': $rid })
			else())
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="TestSuite" data-role="collapsible" data-theme="h" data-content-theme="h">
            <h2>Conformance Class 1: INSPIRE data sets and data set series baseline metadata.
               <div class="ui-li-count">3</div>
            </h2><br/><br/>Please report any issues or problems <a href="https://github.com/INSPIRE-MIF/helpdesk-validator/wiki/Your-feedback" target="_blank">in GitHub</a>.<br/><br/>
Known limitations are documented in the description of the applicable test case or test assertion.<br/><br/>
There is a general limitation in all assertions that polymorphism and containment by reference (see the <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/README#ref_TG_MD" target="_blank">Technical Guidance</a>, sub-clauses A.3, A.4 and A.5) are not supported. However, the current Abstract Test Suite does not support polymorphism and references either (all XPath expressions do not support polymorhism or references; in addition, schema validation is only executed against the ISO/OGC schemas without extensions). It is therefore unclear if this is really a limitation or if the sections in the technical guidance are outdated.
<br/><br/>
Source: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series" target="_blank">Conformance Class 1: 'Baseline metadata for data sets and data set series'</a><br/><br/>
Pre-requisite conformance classes: Common Requirements<br><br><table>
               <tbody>
                  <tr>
                     <td>Status</td>
                     <td>Passed</td>
                  </tr>
                  <tr>
                     <td>Duration</td>
                     <td>1.106 s</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Test suite ID</td>
                     <td>EIDe4a95862-9cc9-436b-9fdd-a0115d342350</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Author</td>
                     <td>Consortium Bilbomatica, Guadaltel y Geograma</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Date created</td>
                     <td>30/06/2018 00:00:00 GMT</td>
                  </tr>
                  <tr>
                     <td>Version</td>
                     <td>1.0.6</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Last editor</td>
                     <td>Consortium Bilbomatica, Guadaltel y Geograma</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Last updated</td>
                     <td>21/02/2022 13:00:00 GMT</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Reference</td>
                     <td><a class="ui-link" href="https://github.com/inspire-eu-validation/ets-repository/tree/master/metadata/2.0">Link</a></td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Hash</td>
                     <td>CBF29CE484222325</td>
                  </tr>
               </tbody>
            </table><br><div class="TestModulePlaceHolder">
               <div data-role="collapsible" data-enhanced="true" id="EIDf6fb6d58-03ec-432f-a456-984d093721e4" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed TestCase SuccessfulTestCase">
                  <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-plus ui-btn-h ui-mini">General Metadata
                        <div class="ui-li-count">1</div><span class="ui-collapsible-heading-status"> click to expand contents</span></a></h3>
                  <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h">Execute tests that apply for all dataset / dataset series metadata records on elements that are directly child elements of the root node of the XML document: MD_Metadata node.<br><br><table>
                        <tbody>
                           <tr>
                              <td>Status</td>
                              <td>Passed</td>
                           </tr>
                           <tr>
                              <td>Duration</td>
                              <td>0.001 s</td>
                           </tr>
                           <tr class="ReportDetail">
                              <td>Test case ID</td>
                              <td>EIDf6fb6d58-03ec-432f-a456-984d093721e4</td>
                           </tr>
                        </tbody>
                     </table><br><div class="TestStepPlaceHolder">
                        <div data-role="collapsible" data-enhanced="true" id="EIDeb25bf23-60b1-4a12-978f-cacd357388cb" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.1: Resource Type<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that a resource type is provided as a dataset or series.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/resource-type" target="_blank">Resource Type</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID9f5d8bbf-59d3-4278-82d3-c9df32d8f42d</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDeb25bf23-60b1-4a12-978f-cacd357388cb" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDeb25bf23-60b1-4a12-978f-cacd357388cb'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDeb25bf23-60b1-4a12-978f-cacd357388cb.expression">Expression:</label><textarea id="EIDeb25bf23-60b1-4a12-978f-cacd357388cb.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $values := ('dataset', 'series')
let $recordsWithErrors := $records[not(gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = $values)][position() le $limitErrors]
return
(if ($recordsWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count($recordsWithErrors)),
 for $record in $recordsWithErrors
   let $rid := $record/gmd:fileIdentifier/gco:CharacterString/text()
   order by $rid
   let $levels := $record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue
   return
     local:addMessage('TR.hierarchyLevel', map { 'filename': local:filename($record), 'id': $rid, 'hierarchyLevels': fn:string-join($levels,', ') })
)</textarea></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div data-role="collapsible" data-enhanced="true" id="EID979c19da-48f9-416d-b751-37ef13912bc6" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed TestCase SuccessfulTestCase">
                  <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-plus ui-btn-h ui-mini">Identification
                        <div class="ui-li-count">6</div><span class="ui-collapsible-heading-status"> click to expand contents</span></a></h3>
                  <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h">Execute tests that apply for all dataset / dataset series metadata records on elements that are child elements of the section of the XML document: Identification Info (property of the gmd:MD_Metadata element). This section contains information specific to the dataset / dataset series.<br><br><table>
                        <tbody>
                           <tr>
                              <td>Status</td>
                              <td>Passed</td>
                           </tr>
                           <tr>
                              <td>Duration</td>
                              <td>1.055 s</td>
                           </tr>
                           <tr class="ReportDetail">
                              <td>Test case ID</td>
                              <td>EID979c19da-48f9-416d-b751-37ef13912bc6</td>
                           </tr>
                        </tbody>
                     </table><br><div class="TestStepPlaceHolder">
                        <div data-role="collapsible" data-enhanced="true" id="EID0b401348-545d-4c11-a9b3-72f40e878383" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.2: Only One Data Identification<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the identification info section of the metadata for data sets and data set series is provided correctly.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/only-one-md-data-identification" target="_blank">Only One Data Identification</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDfeb08775-3d07-4849-bd27-3a549c92d289</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID0b401348-545d-4c11-a9b3-72f40e878383" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID0b401348-545d-4c11-a9b3-72f40e878383'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID0b401348-545d-4c11-a9b3-72f40e878383.expression">Expression:</label><textarea id="EID0b401348-545d-4c11-a9b3-72f40e878383.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages := (
	for $record in $records
	let $rid := $record/gmd:fileIdentifier/gco:CharacterString/text()
	return
	if(count($record/gmd:identificationInfo[1]/gmd:MD_DataIdentification) != 1) then
		local:addMessage('TR.identificationInfo', map { 'filename': local:filename($record), 'id': $rid, 'identificationInfo': fn:string-join($record/gmd:identificationInfo[1]/gmd:MD_DataIdentification,', ') })
	else ()
)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
$messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID24490ac8-81e2-4e8c-b1b8-5d4ccf81122a" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.3: Dataset UID<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that every dataset or dataset series has an Unique Resource Identifier.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/dataset-uid" target="_blank">Dataset UID</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID06911d33-b5a3-4b76-b8ee-d473ebf3c8f4</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID24490ac8-81e2-4e8c-b1b8-5d4ccf81122a" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID24490ac8-81e2-4e8c-b1b8-5d4ccf81122a'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID24490ac8-81e2-4e8c-b1b8-5d4ccf81122a.expression">Expression:</label><textarea id="EID24490ac8-81e2-4e8c-b1b8-5d4ccf81122a.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $levels := ('dataset', 'series')
let $allIdent := 
	for $rec in $records
		for $x in $rec/gmd:identificationInfo[1]/*/gmd:citation/gmd:CI_Citation/gmd:identifier/*/gmd:code/*
		return
		if($x/node-name() = QName('http://www.isotc211.org/2005/gco','gco:CharacterString')) then $x/text()
		else if ($x/node-name() = QName('http://www.isotc211.org/2005/gmx','gmx:Anchor')) then $x/@xlink:href
		else ()
let $distinctRecordIdentifiers := distinct-values($allIdent)
let $duplicateDistinctRecordIdentifiers := $distinctRecordIdentifiers[index-of($distinctRecordIdentifiers,.)[2]]
let $messages :=    
    (for $record in $records
        let $rid := $record/gmd:fileIdentifier/gco:CharacterString/text()
        let $identifiers := $record/gmd:identificationInfo[1]/*/gmd:citation/gmd:CI_Citation/gmd:identifier/*/gmd:code
		let $duplicateIdentifier := 
			for $id in $identifiers
			return 
			if (count(fn:index-of($allIdent,$id)) &gt; 1) then
				$id
			else ()
		return
		let $emptyIdentifiers :=
			for $identifier in $identifiers
            return
			if (not($identifier)) then
				$identifier
            else if ($identifier/gco:CharacterString and not(string-length($identifier/gco:CharacterString/text()) != 0)) then
				$identifier
			else if ($identifier/gmx:Anchor and string-length($identifier/gmx:Anchor/@xlink:href) = 0) then
                $identifier
            else ()
        return
        if (not($identifiers)) then
            local:addMessage('TR.noIdentifier', map { 'filename': local:filename($record), 'id': $rid })
		else if(count($emptyIdentifiers) != 0) then
			local:addMessage('TR.emptyIdentifier', map { 'filename': local:filename($record), 'id': $rid })
		else if(count($duplicateIdentifier)) then
            local:addMessage('TR.duplicateIdentifier', map { 'filename': local:filename($record), 'id': $rid, 'identifier': fn:string-join(distinct-values($duplicateIdentifier),'; ') })
        else ()
    )[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
$messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID2dd3b2e9-b0c8-4a71-bb5f-1430b238f9ba" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.4: INSPIRE Theme Keyword<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the INSPIRE Data Themes, which the data belongs to, are declared using at least one keyword from the INSPIRE Spatial Data Themes vocabulary.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/inspire-theme-keyword" target="_blank">INSPIRE Theme Keyword</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>1.055 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID84892cf0-e7db-4705-9b40-c27a856eacee</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID2dd3b2e9-b0c8-4a71-bb5f-1430b238f9ba" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID2dd3b2e9-b0c8-4a71-bb5f-1430b238f9ba'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID2dd3b2e9-b0c8-4a71-bb5f-1430b238f9ba.expression">Expression:</label><textarea id="EID2dd3b2e9-b0c8-4a71-bb5f-1430b238f9ba.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $levels := ('dataset', 'series')
let $THEMES_TITLE := 'GEMET - INSPIRE themes, version 1.0'
let $messages :=
	(try{
		let $officialLanguages := ('bg','cs','da','de','et','el','en','es','fr','hr','it','lv','lt','hu','mt','nl','pl','pt','ro','sk','sl','fi','sv')
		let $inspireThemesCodeListURL := 'http://inspire.ec.europa.eu/theme'
		let $codeTitles := local:get-code-titles($inspireThemesCodeListURL,$officialLanguages)
		let $codeValues := local:get-code-list-values($inspireThemesCodeListURL)
		let $codes := ($codeTitles,$codeValues)
		for $record in $records
			let $rid := $record/gmd:fileIdentifier/*/text()
			let $relevantDescriptiveKeywordsBlocks := $record/gmd:identificationInfo[1]/gmd:MD_DataIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords[gmd:thesaurusName/gmd:CI_Citation/gmd:title/*/text() = $THEMES_TITLE]
			return
			if (count($relevantDescriptiveKeywordsBlocks) = 0) then
				local:addMessage('TR.wrongKeywordFromINSPIREThemesTitle', map { 'filename': local:filename($record), 'id': $rid })
			else
				if ($relevantDescriptiveKeywordsBlocks[not(some $keyword in ./gmd:keyword/*/text() satisfies $keyword = $codes) ]) then
					local:addMessage('TR.noKeywordFromINSPIREThemes',  map { 'filename': local:filename($record), 'id': $rid, 'url': $inspireThemesCodeListURL, 'keywords': fn:string-join($relevantDescriptiveKeywordsBlocks/gmd:keyword/*/text(),'; ') })
				else ()
	} catch * {       						
		local:addMessage('TR.systemError',  map { 'text': $err:description }) 				
	}
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID0053632e-2cc4-40e4-89bf-58f433301831" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.5: Spatial Resolution<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the spatial resolution is defined using either an scale or a distance resolution.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/spatial-resolution" target="_blank">Spatial Resolution</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID82a0442f-0185-4d6a-9b4e-0b7356613de7</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID0053632e-2cc4-40e4-89bf-58f433301831" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID0053632e-2cc4-40e4-89bf-58f433301831'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID0053632e-2cc4-40e4-89bf-58f433301831.expression">Expression:</label><textarea id="EID0053632e-2cc4-40e4-89bf-58f433301831.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $regex_integer := '(^\d{1,40}$)'
let $messages :=
	(for $record in $records
		let $countResolutions := count($record/gmd:identificationInfo[1]/*/gmd:spatialResolution)
		let $countScale := count($record/gmd:identificationInfo[1]/*/gmd:spatialResolution/gmd:MD_Resolution/gmd:equivalentScale)
		let $countDistance := count($record/gmd:identificationInfo[1]/*/gmd:spatialResolution/gmd:MD_Resolution/gmd:distance)
		let $invalidScale :=
			for $x in $record/gmd:identificationInfo[1]/*/gmd:spatialResolution/gmd:MD_Resolution/gmd:equivalentScale/gmd:MD_RepresentativeFraction/gmd:denominator/gco:Integer
			return
			if(matches($x/text(), $regex_integer)) then ()
			else $x

        let $invalidDistance :=
			for $x in $record/gmd:identificationInfo[1]/*/gmd:spatialResolution/gmd:MD_Resolution/gmd:distance/gco:Distance
				return
					try {
						if(xs:double($x/text())) then ()
						else $x
					}catch err:FORG0001 {
						$x
					}

		let $rid := $record/gmd:fileIdentifier/*/text()
		return
		if (($countResolutions &gt; 0) and ($countScale = 0) and ($countDistance = 0)) then
			local:addMessage('TR.noResolutions', map { 'filename': local:filename($record), 'id': $rid })
		else if(count($invalidScale) != 0) then
			local:addMessage('TR.invalidScale', map { 'filename': local:filename($record), 'id': $rid, 'invalid': fn:string-join($invalidScale,'; ')})
		else if(count($invalidDistance) != 0) then
			local:addMessage('TR.invalidDistance', map { 'filename': local:filename($record), 'id': $rid, 'invalid': fn:string-join($invalidDistance,'; ')})
		else
			for $spatialResolution in $record/gmd:identificationInfo[1]/*/gmd:spatialResolution
			return
			if (count($spatialResolution/gmd:MD_Resolution/gmd:equivalentScale) &gt; 0 and count($spatialResolution/gmd:MD_Resolution/gmd:distance) &gt; 0) then
				local:addMessage('TR.mixedResolutions', map { 'filename': local:filename($record), 'id': $rid })
			else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID0de0a37f-783b-4f5f-a402-e1c12b57eafa" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.6: Resource Language<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that a resource language is provided.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/resource-language" target="_blank">Resource Language</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID095d416e-3dfe-4936-83d4-71028e3d0c4c</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID0de0a37f-783b-4f5f-a402-e1c12b57eafa" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID0de0a37f-783b-4f5f-a402-e1c12b57eafa'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID0de0a37f-783b-4f5f-a402-e1c12b57eafa.expression">Expression:</label><textarea id="EID0de0a37f-783b-4f5f-a402-e1c12b57eafa.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $codes := ('aar','abk','ace','ach','ada','ady','afa','afh','afr','ain','aka','akk','alb','ale','alg','alt','amh','ang','anp','apa','ara','arc','arg','arm','arn','arp','art','arw','asm','ast','ath','aus','ava','ave','awa','aym','aze','bad','bai','bak','bal','bam','ban','baq','bas','bat','bej','bel','bem','ben','ber','bho','bih','bik','bin','bis','bla','bnt','bos','bra','bre','btk','bua','bug','bul','bur','byn','cad','cai','car','cat','cau','ceb','cel','cha','chb','che','chg','chi','chk','chm','chn','cho','chp','chr','chu','chv','chy','cmc','cop','cor','cos','cpe','cpf','cpp','cre','crh','crp','csb','cus','cze','dak','dan','dar','day','del','den','dgr','din','div','doi','dra','dsb','dua','dum','dut','dyu','dzo','efi','egy','eka','elx','eng','enm','epo','est','ewe','ewo','fan','fao','fat','fij','fil','fin','fiu','fon','fre','frm','fro','frr','frs','fry','ful','fur','gaa','gay','gba','gem','geo','ger','gez','gil','gla','gle','glg','glv','gmh','goh','gon','gor','got','grb','grc','gre','grn','gsw','guj','gwi','hai','hat','hau','haw','heb','her','hil','him','hin','hit','hmn','hmo','hrv','hsb','hun','hup','iba','ibo','ice','ido','iii','ijo','iku','ile','ilo','ina','inc','ind','ine','inh','ipk','ira','iro','ita','jav','jbo','jpn','jpr','jrb','kaa','kab','kac','kal','kam','kan','kar','kas','kau','kaw','kaz','kbd','kha','khi','khm','kho','kik','kin','kir','kmb','kok','kom','kon','kor','kos','kpe','krc','krl','kro','kru','kua','kum','kur','kut','lad','lah','lam','lao','lat','lav','lez','lim','lin','lit','lol','loz','ltz','lua','lub','lug','lui','lun','luo','lus','mac','mad','mag','mah','mai','mak','mal','man','mao','map','mar','mas','may','mdf','mdr','men','mga','mic','min','mis','mkh','mlg','mlt','mnc','mni','mno','moh','mon','mos','mul','mun','mus','mwl','mwr','myn','myv','nah','nai','nap','nau','nav','nbl','nde','ndo','nds','nep','new','nia','nia','nic','niu','nno','nob','nog','non','nor','nqo','nso','nub','nwc','nya','nym','nyn','nyo','nzi','oci','oji','ori','orm','osa','oss','ota','oto','paa','pag','pal','pam','pan','pap','pau','peo','per','phi','phn','pli','pol','pon','por','pra','pro','pus','qaa-qtz','que','raj','rap','rar','roa','roh','rom','rum','run','rup','rus','sad','sag','sah','sai','sal','sam','san','sas','sat','scn','sco','sel','sem','sga','sgn','shn','sid','sin','sio','sit','sla','slo','slv','sma','sme','smi','smj','smn','smo','sms','sna','snd','snk','sog','som','son','sot','spa','srd','srn','srp','srr','ssa','ssw','suk','sun','sus','sux','swa','swe','syc','syr','tah','tai','tam','tat','tel','tem','ter','tet','tgk','tgl','tha','tib','tig','tir','tiv','tkl','tlh','tli','tmh','tog','ton','tpi','tsi','tsn','tso','tuk','tum','tup','tur','tut','tvl','twi','tyv','udm','uga','uig','ukr','umb','und','urd','uzb','vai','ven','vie','vol','vot','wak','wal','war','was','wel','wen','wln','wol','xal','xho','yao','yap','yid','yor','ypk','zap','zbl','zen','zha','znd','zul','zun','zxx','zza')
let $messages :=    	
	(for $record in $records    		 
		let $rid := $record/gmd:fileIdentifier/*/text()
		let $languageCodes := $record/gmd:identificationInfo[1]/*/gmd:language/gmd:LanguageCode	 	 
		return
		if (not($languageCodes)) then
			local:addMessage('TR.noLanguageCode',  map { 'filename': local:filename($record), 'id': $rid })
		else 		
			let $wrongCodeValues := $languageCodes/@codeListValue[not(. = $codes)]
			let $wrongCodeList := $languageCodes/@codeList[not(. = 'http://www.loc.gov/standards/iso639-2/') and not(. = 'http://www.loc.gov/standards/iso639-2') and not(. = 'https://www.loc.gov/standards/iso639-2/') and not(. = 'https://www.loc.gov/standards/iso639-2') and not(. = 'http://id.loc.gov/vocabulary/iso639-2/') and not(. = 'http://id.loc.gov/vocabulary/iso639-2') and not(. = 'https://id.loc.gov/vocabulary/iso639-2/') and not(. = 'https://id.loc.gov/vocabulary/iso639-2')]
			return
			if ($wrongCodeValues) then
				local:addMessage('TR.invalidLanguageCode',  map { 'filename': local:filename($record), 'id': $rid, 'invalidCodes' : string-join($wrongCodeValues,', ') })
			else if($wrongCodeList) then
				local:addMessage('TR.wrongCodeList_Param',  map { 'filename': local:filename($record), 'id': $rid, 'param': 'http://www.loc.gov/standards/iso639-2/ or http://id.loc.gov/vocabulary/iso639-2'})
			else ()     	
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID489f9313-8253-4e23-80b4-1b68e1a1721b" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.7: Topic Category<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that at least one Topic category describing the category of the resource is provided.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/topic-category" target="_blank">Topic Category</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDae4bda0e-1dec-4e66-97b8-d4c43b66d2b8</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID489f9313-8253-4e23-80b4-1b68e1a1721b" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID489f9313-8253-4e23-80b4-1b68e1a1721b'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID489f9313-8253-4e23-80b4-1b68e1a1721b.expression">Expression:</label><textarea id="EID489f9313-8253-4e23-80b4-1b68e1a1721b.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $codes := ('biota','boundaries','climatologyMeteorologyAtmosphere','economy','elevation','environment','farming','geoscientificInformation','health','imageryBaseMapsEarthCover','inlandWaters','intelligenceMilitary','location','oceans','planningCadastre','society','structure','transportation','utilitiesCommunication')
let $messages :=    
    (for $record in $records
        let $rid := $record/gmd:fileIdentifier/*/text()
		let $topicCategories := $record/gmd:identificationInfo[1]/gmd:MD_DataIdentification/gmd:topicCategory
        return
		if (count($topicCategories) = 0) then
            local:addMessage('TR.noTopicCategory',  map { 'filename': local:filename($record), 'id': $rid})
        else
			for $topicCategory in $topicCategories
			return
			if(not($topicCategory/gmd:MD_TopicCategoryCode)) then
            	local:addMessage('TR.noTopicCategory',  map { 'filename': local:filename($record), 'id': $rid})
			else if (not($topicCategory/gmd:MD_TopicCategoryCode = $codes)) then
                local:addMessage('TR.invalidTopicCode',  map { 'filename': local:filename($record), 'id': $rid, 'invalidCodes' : $topicCategory/gmd:MD_TopicCategoryCode/text() })
			else()
    )[position() le $limitErrors] 
return
(if ($messages) then 'FAILED' else 'PASSED',
local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
$messages)</textarea></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div data-role="collapsible" data-enhanced="true" id="EID646900b2-9564-44b9-8576-cfcab22e3419" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed TestCase SuccessfulTestCase">
                  <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-plus ui-btn-h ui-mini">Distribution
                        <div class="ui-li-count">4</div><span class="ui-collapsible-heading-status"> click to expand contents</span></a></h3>
                  <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h">Execute tests that apply for all dataset / dataset series metadata records on elements that are child elements of the section of the XML document: Distribution Information (property of the gmd:MD_Metadata element). This section contains information about who makes a resource available and how to get it.<br><br><table>
                        <tbody>
                           <tr>
                              <td>Status</td>
                              <td>Passed</td>
                           </tr>
                           <tr>
                              <td>Duration</td>
                              <td>0.051 s</td>
                           </tr>
                           <tr class="ReportDetail">
                              <td>Test case ID</td>
                              <td>EID646900b2-9564-44b9-8576-cfcab22e3419</td>
                           </tr>
                        </tbody>
                     </table><br><div class="TestStepPlaceHolder">
                        <div data-role="collapsible" data-enhanced="true" id="EID0505cb84-2438-4a4d-b290-7d98491b458e" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.8: Resource Locator<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test if there is a resource or the url that points to a resource that provides additional information about the set data set or data set series.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/resource-locator" target="_blank">Resource Locator</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID4f536f56-3118-474e-81b4-c0e36344a70b</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID0505cb84-2438-4a4d-b290-7d98491b458e" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID0505cb84-2438-4a4d-b290-7d98491b458e'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID0505cb84-2438-4a4d-b290-7d98491b458e.expression">Expression:</label><textarea id="EID0505cb84-2438-4a4d-b290-7d98491b458e.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $regex_url := '(http://|https://|ftp://)([a-z0-9]{1})((\.[a-z0-9-])|([a-z0-9-]))*\.([a-z0-9-]{1,4})(/?)'
let $messages := 	
	(for $record in $records
		let $rid := $record/gmd:fileIdentifier/*/text()
		return
		for $onLine in $record/gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions/gmd:MD_DigitalTransferOptions/gmd:onLine/gmd:CI_OnlineResource
			let $url := $onLine/gmd:linkage/gmd:URL
			return
            if (not(string-length($url/text()) != 0)) then
				local:addMessage('TR.linkageWithoutURL', map { 'filename': local:filename($record), 'id': $rid })
			else if (not(matches($url/text(), $regex_url))) then
					local:addMessage('TR.invalidURL', map { 'filename': local:filename($record), 'id': $rid, 'url': $url/text()})
			else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID7c0350e6-5ce6-40d8-b294-bf181efe6177" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.9: Data Quality Info Section<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that one citation of the product specification or user requirement against which data is being evaluated is provided.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/one-data-quality-element" target="_blank">Data Quality Info Section</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDc7ef6d4f-a03b-4797-85e2-3b4a49e0c5ff</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID7c0350e6-5ce6-40d8-b294-bf181efe6177" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID7c0350e6-5ce6-40d8-b294-bf181efe6177'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID7c0350e6-5ce6-40d8-b294-bf181efe6177.expression">Expression:</label><textarea id="EID7c0350e6-5ce6-40d8-b294-bf181efe6177.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages :=
	(for $record in $records
		let $rid := $record/gmd:fileIdentifier/*/text()
		let $dataQuality := $record/gmd:dataQualityInfo/gmd:DQ_DataQuality
		let $levels := ('dataset', 'series')
		let $MD_ScopeCode := $record/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode
		return 	 
		if (count($dataQuality) != 1) then
			local:addMessage('TR.wrongNumberOfDataQuality', map { 'filename': local:filename($record), 'id': $rid })
		else if (not($MD_ScopeCode/@codeListValue = $levels)) then
			local:addMessage('TR.invalidCodeList', map { 'filename': local:filename($record), 'id': $rid })
		else ()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID653e4e4b-5b2d-4fb9-8f66-5b9c206c0496" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.10: Dataset Conformity<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that the metadata contains a citation of the implementing rules on interoperability of spatial data sets (Regulation 1089/2010).</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/conformity" target="_blank">Dataset Conformity</a></p>
									<p>To fulfill this requirement, the evaluated metadata dataset shall be encoded according to the following common requirements of the Technical Guide:</p>
									<p><a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/conformity" target="_blank"> Common ATS (C.20): 'Dataset Conformity'</a></p>
									<p><a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/conformity-specification" target="_blank"> Common ATS (C.21): 'Dataset Conformity Specifications'</a></p>
									<p><a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/common/conformity-degree" target="_blank"> Common ATS (C.22): 'Conformity Degree '</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.049 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID8f663265-32b8-4c99-8997-2d40f6ce5b93</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID653e4e4b-5b2d-4fb9-8f66-5b9c206c0496" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID653e4e4b-5b2d-4fb9-8f66-5b9c206c0496'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID653e4e4b-5b2d-4fb9-8f66-5b9c206c0496.expression">Expression:</label><textarea id="EID653e4e4b-5b2d-4fb9-8f66-5b9c206c0496.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $enum_files := ('enum_bul', 'enum_cze', 'enum_dan', 'enum_dut', 'enum_eng', 'enum_est', 'enum_fin', 'enum_fre', 'enum_ger', 'enum_gle', 'enum_gre', 'enum_hun', 'enum_ita', 'enum_lav', 'enum_lit', 'enum_mlt', 'enum_pol', 'enum_por', 'enum_rum', 'enum_slo', 'enum_slv', 'enum_spa', 'enum_swe')
let $conformityText := for $x in $enum_files
	return fn:doc(concat('http://inspire.ec.europa.eu/schemas/common/1.0/enums/', $x, '.xsd'))/xs:schema/xs:complexType[starts-with(@name, 'citationInspireInteroperabilityRegulation')]/xs:complexContent/xs:restriction[@base = 'citationConformity']/xs:sequence/xs:element[@name = 'Title']/xs:simpleType/xs:restriction/xs:enumeration/@value
let $conformityTextLower := for $x in $conformityText return normalize-space(lower-case($x))
let $messages :=
	(for $record in $records
		let $rid := $record/gmd:fileIdentifier/*/text()
		let $confResults := $record/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:report/gmd:DQ_DomainConsistency/gmd:result/gmd:DQ_ConformanceResult
        let $valid := 
            (for $confResult in $confResults
				return 
					if (contains($confResult/gmd:specification/gmd:CI_Citation/gmd:title/*/text(), '1089/2010')) then
						let $dummy := local:log("Code list value: " || $confResult/gmd:specification/gmd:CI_Citation/gmd:title/*/text())
						return
						if (normalize-space(lower-case($confResult/gmd:specification/gmd:CI_Citation/gmd:title/*/text())) = $conformityTextLower) then
							$confResult
						else()
					else())

		let $invalid_dateTypeCode := 
			(for $confResult in $confResults
				return
					if (contains($confResult/gmd:specification/gmd:CI_Citation/gmd:title/*/text(), '1089/2010')) then
						let $dateTypeCode := $confResult/gmd:specification/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/gmd:CI_DateTypeCode
						let $dummy2 := local:log("Code list value: " || $dateTypeCode/@codeListValue)
						return
							if (not($dateTypeCode/@codeListValue = ('publication', 'creation', 'revision'))) then
								$dateTypeCode
							else()
					else())
		return
		if(count($invalid_dateTypeCode) != 0) then
			local:addMessage('TR.noDateTypeForSpecification', map { 'filename': local:filename($record), 'id': $rid })
		else if (count($valid) = 0) then
			local:addMessage('TR.wrongNumberOfSpecificationForPurpose', map { 'filename': local:filename($record), 'id': $rid })
		else()
	)[position() le $limitErrors]
return
(if ($messages) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                           </div>
                        </div>
                        <div data-role="collapsible" data-enhanced="true" id="EID937c157a-5d51-4cf5-ab16-ca1b67e6643e" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion SuccessfulAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-check ui-btn-h ui-mini">md datasets-and-series 1.11: Lineage<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-h"><p>Test that exactly one explanation about the lineage of a dataset is provided.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/datasets-and-series/lineage" target="_blank">Lineage</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>0.001 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID366b8ce9-9a73-47b8-96da-3d24166a0f3f</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EID937c157a-5d51-4cf5-ab16-ca1b67e6643e" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EID937c157a-5d51-4cf5-ab16-ca1b67e6643e'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EID937c157a-5d51-4cf5-ab16-ca1b67e6643e.expression">Expression:</label><textarea id="EID937c157a-5d51-4cf5-ab16-ca1b67e6643e.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages :=    
    (for $record in $records
        let $rid := $record/gmd:fileIdentifier/*/text()
		let $lineageStatement := $record/gmd:dataQualityInfo/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement
        return   
        if (count($lineageStatement) != 1) then
            local:addMessage('TR.wrongNumberOfLineageStatements',  map { 'filename': local:filename($record), 'id': $rid, 'count': string(count($lineageStatement)) })
        else if (not($lineageStatement) or not(string-length($lineageStatement/gco:CharacterString) != 0 or string-length($lineageStatement/gmx:Anchor) != 0)) then
            local:addMessage('TR.emptyLineageStatement',  map { 'filename': local:filename($record), 'id': $rid })
        else ()         
    )[position() le $limitErrors] 
return
(if ($messages) then 'FAILED' else 'PASSED',
local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
$messages)</textarea></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="TestSuite" data-role="collapsible" data-theme="j" data-content-theme="g">
            <h2>Conformance Class 2b: INSPIRE data sets and data set series metadata for Monitoring
               <div class="ui-li-count">1</div>
            </h2>This test suite examines metadata records against the requirements for metadata in INSPIRE.<br/><br/>Please report any issues or problems <a href="https://github.com/INSPIRE-MIF/helpdesk-validator/wiki/Your-feedback" target="_blank">in GitHub</a>.<br/><br/>
Known limitations are documented in the description of the applicable test case or test assertion.<br/><br/>
Source: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/monitoring" target="_blank">Conformance Class 2b: INSPIRE data sets and data set series metadata for Monitoring</a><br/><br/><br><br><table>
               <tbody>
                  <tr>
                     <td>Status</td>
                     <td>Passed, manual checks required</td>
                  </tr>
                  <tr>
                     <td>Duration</td>
                     <td>4 s</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Test suite ID</td>
                     <td>EID0b86f7a3-2947-4841-823d-6a00d8e06d70</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Author</td>
                     <td>Consortium Bilbomatica, Guadaltel y Geograma</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Date created</td>
                     <td>14/01/2020 00:00:00 GMT</td>
                  </tr>
                  <tr>
                     <td>Version</td>
                     <td>1.0.2</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Last editor</td>
                     <td>Consortium Bilbomatica, Guadaltel y Geograma</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Last updated</td>
                     <td>24/07/2020 11:00:00 GMT</td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Reference</td>
                     <td><a class="ui-link" href="https://github.com/inspire-eu-validation/ets-repository/tree/master/metadata/2.0">Link</a></td>
                  </tr>
                  <tr class="ReportDetail">
                     <td>Hash</td>
                     <td>CBF29CE484222325</td>
                  </tr>
               </tbody>
            </table><br><div class="TestModulePlaceHolder">
               <div data-role="collapsible" data-enhanced="true" id="EID1d36be2a-6236-430e-8221-b6705d9accda" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed TestCase ManualTestCase">
                  <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-eye ui-btn-j ui-mini">Monitoring requirements
                        <div class="ui-li-count">2</div><span class="ui-collapsible-heading-status"> click to expand contents</span></a></h3>
                  <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-g">Execute tests that apply for monitoring metadata.<br><br><table>
                        <tbody>
                           <tr>
                              <td>Status</td>
                              <td>Passed, manual checks required</td>
                           </tr>
                           <tr>
                              <td>Duration</td>
                              <td>4 s</td>
                           </tr>
                           <tr class="ReportDetail">
                              <td>Test case ID</td>
                              <td>EID1d36be2a-6236-430e-8221-b6705d9accda</td>
                           </tr>
                        </tbody>
                     </table><br><div class="TestStepPlaceHolder">
                        <div data-role="collapsible" data-enhanced="true" id="EIDa993c6bd-ac96-4b8a-8ab4-448c8e1a2c67" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion ManualAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-eye ui-btn-j ui-mini">M.1: Spatial scope keyword<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-g"><p>Test that the spatial scope covered by the data set or data set series is provided.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/monitoring/spatial-scope" target="_blank">Spatial Scope Keyword</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed, manual checks required</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>1.499 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EIDa09768e4-1fab-48b4-ac7c-3dc0af7e8649</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDa993c6bd-ac96-4b8a-8ab4-448c8e1a2c67" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDa993c6bd-ac96-4b8a-8ab4-448c8e1a2c67'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDa993c6bd-ac96-4b8a-8ab4-448c8e1a2c67.expression">Expression:</label><textarea id="EIDa993c6bd-ac96-4b8a-8ab4-448c8e1a2c67.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages := 
	(for $record in $records
	let $rid := $record/gmd:fileIdentifier/*/text()

	let $validDate := '2019-05-22'	
	let $spatialScopeCodeList := 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope'
	let $spatialScopeRegistryUrl := 'http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope'
	let $officialLanguages := ('bg','cs','da','de','et','el','en','es','fr','hr','it','lv','lt','hu','mt','nl','pl','pt','ro','sk','sl','fi','sv')
	let $spatialScopeCodelistValue := local:get-code-titles($spatialScopeCodeList, $officialLanguages)
	let $spatialScopeLabels := (
		for $lang in $officialLanguages
		let $url := $spatialScopeRegistryUrl || '.' || $lang || '.xml'
	    return try {
			fn:doc($url)/*:metadata-codelist/*:label/text()
		} catch * {
			error((), $url || ' cannot be accessed.')
		}
	)
	let $codeValues := local:get-code-list-values($spatialScopeCodeList)
	let $spatialScopeCodelistUri :=
		for $x in $codeValues
		return fn:concat($spatialScopeCodeList, '/', $x)

	let $descriptiveKeywords := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:descriptiveKeywords
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords
	let $MD_KeywordsSpatialScope := 
		for $x in $descriptiveKeywords/gmd:MD_Keywords
		where $x/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href = $spatialScopeCodeList or
				$x/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString = $spatialScopeLabels
		return $x
	let $keywordAnchorSpatialScope :=
		for $x in $descriptiveKeywords/gmd:MD_Keywords/gmd:keyword
		where $x/gmx:Anchor/@xlink:href[starts-with(.,$spatialScopeCodeList)]
		return $x
	let $validAnchorInMD_KeywordsSpatialScope := 
		for $x in $MD_KeywordsSpatialScope/gmd:keyword
		where ($x/gmx:Anchor/@xlink:href = $spatialScopeCodelistUri)
		return $x
	let $validCharacterStringInMD_KeywordsSpatialScope := 
		for $x in $MD_KeywordsSpatialScope/gmd:keyword
		where ($x/gco:CharacterString = $spatialScopeCodelistValue)
		return $x	
	let $thesaurusAnchorCodelist := 
		for $x in $descriptiveKeywords/gmd:MD_Keywords
		where $x/gmd:keyword/gmx:Anchor/@xlink:href[starts-with(.,$spatialScopeCodeList)] and count($x/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href) &gt; 0
		return $x/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gmx:Anchor
	let $validThesaurusAnchorCodelist := 
		for $x in $thesaurusAnchorCodelist
		where $x/@xlink:href = $spatialScopeCodeList
		return $x
	let $thesaurusNameTitle := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title		
	return
	
	if (count($MD_KeywordsSpatialScope) = 0 and count($keywordAnchorSpatialScope) = 0) then
		local:addMessage('TR.manualCheckSpatialScope', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($MD_KeywordsSpatialScope) &gt; 1) then
		local:addMessage('TR.spatialScopeMultiplicity', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($MD_KeywordsSpatialScope/gmd:keyword) &gt; 1) then
		local:addMessage('TR.spatialScopeKeywordMultiplicity', map { 'filename': local:filename($record), 'id': $rid })	
	else if (count($thesaurusAnchorCodelist) = 1 and count($validThesaurusAnchorCodelist) = 0) then
		local:addMessage('TR.spatialScopeInvalidThesaurusCodelist', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($keywordAnchorSpatialScope) = 1 and count($thesaurusNameTitle) = 0) then
		local:addMessage('TR.spatialScopeCitationMissing', map { 'filename': local:filename($record), 'id': $rid })		
	else if (count($keywordAnchorSpatialScope) &gt; 1) then
		local:addMessage('TR.spatialScopeKeywordMultiplicity', map { 'filename': local:filename($record), 'id': $rid })	
	else if (count($keywordAnchorSpatialScope) = 1 and not(count($validAnchorInMD_KeywordsSpatialScope) = 1)) then
		local:addMessage('TR.spatialScopeInvalidCodelistUri', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($keywordAnchorSpatialScope) = 0 and not(count($validCharacterStringInMD_KeywordsSpatialScope) = 1)) then
		local:addMessage('TR.spatialScopeInvalidCodelistValue', map { 'filename': local:filename($record), 'id': $rid })
	else if (not ($MD_KeywordsSpatialScope/gmd:thesaurusName/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date = $validDate)) then
		local:addMessage('TR.spatialScopeInvalidDate', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($validAnchorInMD_KeywordsSpatialScope) != 1 and count($validCharacterStringInMD_KeywordsSpatialScope) != 1) then
		local:addMessage('TR.spatialScopeExactlyOneKeyword', map { 'filename': local:filename($record), 'id': $rid })
	else if ($MD_KeywordsSpatialScope/gmd:thesaurusName/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/gmd:CI_DateTypeCode/@codeListValue != 'publication') then
		local:addMessage('TR.spatialScopeInvalidDateCodeListValue', map { 'filename': local:filename($record), 'id': $rid })
	else()
	)[position() le $limitErrors]
return
(if ($messages/@ref = 'TR.manualCheckSpatialScope') then 'PASSED_MANUAL' 
 else if ($messages/@ref = 'TR.spatialScopeMultiplicity') then 'FAILED'
 else if ($messages/@ref = 'TR.spatialScopeKeywordMultiplicity') then 'FAILED'
 else if ($messages/@ref = 'TR.spatialScopeInvalidThesaurusCodelist') then 'FAILED'
 else if ($messages/@ref = 'TR.spatialScopeCitationMissing') then 'FAILED' 
 else if ($messages/@ref = 'TR.spatialScopeInvalidCodelistUri') then 'FAILED'
 else if ($messages/@ref = 'TR.spatialScopeInvalidCodelistValue') then 'FAILED'
 else if ($messages/@ref = 'TR.spatialScopeInvalidDate') then 'FAILED'
 else if ($messages/@ref = 'TR.spatialScopeExactlyOneKeyword') then 'FAILED' 
 else if ($messages/@ref = 'TR.spatialScopeInvalidDateCodeListValue') then 'FAILED' 

 else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                              <div class="FailureMessage"><label for="d426566e5592">Messages</label><textarea id="d426566e5592.failureMessages" data-mini="true" readonly class="ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow">The metadata record set has 1 record(s) with errors for this assertion.&#xD;
XML document '2b_HELEO-L1C-INSPIRE-THE-CORRECT - Version_3 - Copy.xml', record 'Hxx04_O_1CNA_HR_MSVNIR_20260912T104502_20260912T104504_00523_A01_20250912T111554_1': Check manually that a spatial scope keyword is provided if the data set or data set series scope is 'National' or 'Regional'.&#xD;
</textarea></div>
                           </div>
                        </div>
                     </div>
                     <div class="TestStepPlaceHolder">
                        <div data-role="collapsible" data-enhanced="true" id="EIDf7baa7de-d7ff-400e-b129-1ffdc66b727e" data-mini="true" class="ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-collapsed Assertion ManualAssertion">
                           <h5 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-icon-eye ui-btn-j ui-mini">M.2: Priority datasets keyword<span class="ui-collapsible-heading-status"> click to expand contents</span></a></h5>
                           <div aria-hidden="true" class="ui-collapsible-content ui-collapsible-content-collapsed ui-body-g"><p>Test that keyword(s) for priority data sets are provided in the metadata.</p>
									<p>More information: <a href="http://inspire.ec.europa.eu/id/ats/metadata/2.0/monitoring/priority-datasets" target="_blank">Priority Datasets Keyword</a></p><br><br><table>
                                 <tbody>
                                    <tr>
                                       <td>Status</td>
                                       <td>Passed, manual checks required</td>
                                    </tr>
                                    <tr>
                                       <td>Duration</td>
                                       <td>2.714 s</td>
                                    </tr>
                                    <tr class="ReportDetail">
                                       <td>Assertion ID</td>
                                       <td>EID5147ecc7-bc34-4283-a6a2-8adf34581106</td>
                                    </tr>
                                    <tr class="DoNotShowInSimpleView">
                                       <td>Assertion URI</td>
                                       <td><a class="ui-link" href="http://ebe-production-validator.bqs5rksrhb.eu-west-1.elasticbeanstalk.com/validator/v2/TestRuns/EIDc06c0a3e-1384-4a91-b1a9-babf7ef63e0b.html?lang=en#EIDf7baa7de-d7ff-400e-b129-1ffdc66b727e" data-ajax="false" onclick="event.preventDefault(); jumpToAnchor('EIDf7baa7de-d7ff-400e-b129-1ffdc66b727e'); return false;">Link</a></td>
                                    </tr>
                                 </tbody>
                              </table><br><div class="ReportDetail Expression"><label for="EIDf7baa7de-d7ff-400e-b129-1ffdc66b727e.expression">Expression:</label><textarea id="EIDf7baa7de-d7ff-400e-b129-1ffdc66b727e.expression" class="Expression ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow" data-mini="true" readonly>let $messages := 
	(for $record in $records
	let $rid := $record/gmd:fileIdentifier/*/text()

	let $validDate := '2018-04-04'	
	let $priorityDatasetsCodeList := 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset'
	let $priorityDatasetRegistryUrl := 'http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset'
	let $officialLanguages := ('bg','cs','da','de','et','el','en','es','fr','hr','it','lv','lt','hu','mt','nl','pl','pt','ro','sk','sl','fi','sv')
	let $priorityDatasetsCodelistValue := local:get-code-titles($priorityDatasetsCodeList, $officialLanguages)
	let $priorityDatasetLabels := (
		for $lang in $officialLanguages
		let $url := $priorityDatasetRegistryUrl || '.' || $lang || '.xml'
	    return try {
			fn:doc($url)/*:metadata-codelist/*:label/text()
		} catch * {
			error((), $url || ' cannot be accessed.')
		}
	)
	let $codeValues := local:get-code-list-values($priorityDatasetsCodeList)
	let $priorityDatasetsCodelistUri :=
		for $x in $codeValues
		return fn:concat($priorityDatasetsCodeList, '/', $x)
	
	let $descriptiveKeywords := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:descriptiveKeywords
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords
	let $MD_KeywordsPriorityDatasets := 
		for $x in $descriptiveKeywords/gmd:MD_Keywords
		where $x/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href = $priorityDatasetsCodeList or
				$x/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString = $priorityDatasetLabels
		return $x
	let $keywordAnchorPriorityDatasets :=
		for $x in $descriptiveKeywords/gmd:MD_Keywords/gmd:keyword
		where $x/gmx:Anchor/@xlink:href[starts-with(.,$priorityDatasetsCodeList)]
		return $x
	let $validAnchorInMD_KeywordsPriorityDatasets := 
		for $x in $MD_KeywordsPriorityDatasets/gmd:keyword
		where ($x/gmx:Anchor/@xlink:href = $priorityDatasetsCodelistUri)
		return $x
	let $validCharacterStringInMD_KeywordsPriorityDatasets := 
		for $x in $MD_KeywordsPriorityDatasets/gmd:keyword
		where ($x/gco:CharacterString = $priorityDatasetsCodelistValue)
		return $x
	let $thesaurusAnchorCodelist := 
		for $x in $descriptiveKeywords/gmd:MD_Keywords
		where $x/gmd:keyword/gmx:Anchor/@xlink:href[starts-with(.,$priorityDatasetsCodeList)] and count($x/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gmx:Anchor/@xlink:href) &gt; 0
		return $x/gmd:thesaurusName/gmd:CI_Citation/gmd:title/gmx:Anchor	
	let $validThesaurusAnchorCodelist := 
		for $x in $thesaurusAnchorCodelist
		where $x/@xlink:href = $priorityDatasetsCodeList
		return $x
	let $thesaurusNameTitle := 
		if ($record/gmd:hierarchyLevel/gmd:MD_ScopeCode/@codeListValue = 'service') then
			$record/gmd:identificationInfo/srv:SV_ServiceIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title
		else
			$record/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:thesaurusName/gmd:CI_Citation/gmd:title
	return
	
	if (count($MD_KeywordsPriorityDatasets) = 0 and count($keywordAnchorPriorityDatasets) = 0) then
		local:addMessage('TR.manualCheckPriorityDatasets', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($MD_KeywordsPriorityDatasets) &gt; 1) then
		local:addMessage('TR.priorityDatasetsMultiplicity', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($thesaurusAnchorCodelist) = 1 and count($validThesaurusAnchorCodelist) = 0) then
		local:addMessage('TR.priorityDatasetsInvalidThesaurusCodelist', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($keywordAnchorPriorityDatasets) = 1 and count($thesaurusNameTitle) = 0) then
		local:addMessage('TR.priorityDatasetsCitationMissing', map { 'filename': local:filename($record), 'id': $rid })		
	else if (count($validAnchorInMD_KeywordsPriorityDatasets) != count($MD_KeywordsPriorityDatasets/gmd:keyword/gmx:Anchor)) then
		local:addMessage('TR.priorityDatasetsInvalidKeyword', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($validCharacterStringInMD_KeywordsPriorityDatasets) != count($MD_KeywordsPriorityDatasets/gmd:keyword/gco:CharacterString)) then
		local:addMessage('TR.priorityDatasetsInvalidKeyword', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($keywordAnchorPriorityDatasets) != count($validAnchorInMD_KeywordsPriorityDatasets)) then
		local:addMessage('TR.priorityDatasetsOutsideMDKeyword', map { 'filename': local:filename($record), 'id': $rid })
	else if (count($validAnchorInMD_KeywordsPriorityDatasets) = 0 and count($validCharacterStringInMD_KeywordsPriorityDatasets) = 0) then
		local:addMessage('TR.priorityDatasetsAtleastOneKeyword', map { 'filename': local:filename($record), 'id': $rid })
	else if (not ($MD_KeywordsPriorityDatasets/gmd:thesaurusName/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date/gco:Date = $validDate)) then
		local:addMessage('TR.priorityDatasetsInvalidDate', map { 'filename': local:filename($record), 'id': $rid })
	else if ($MD_KeywordsPriorityDatasets/gmd:thesaurusName/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:dateType/gmd:CI_DateTypeCode/@codeListValue != 'publication') then
		local:addMessage('TR.priorityDatasetsInvalidDateCodeListValue', map { 'filename': local:filename($record), 'id': $rid })
	else()
	)[position() le $limitErrors]
return
(if ($messages/@ref = 'TR.manualCheckPriorityDatasets') then 'PASSED_MANUAL' 
 else if ($messages/@ref = 'TR.priorityDatasetsMultiplicity') then 'FAILED'
 else if ($messages/@ref = 'TR.priorityDatasetsInvalidThesaurusCodelist') then 'FAILED'
 else if ($messages/@ref = 'TR.priorityDatasetsOutsideMDKeyword') then 'FAILED'
 else if ($messages/@ref = 'TR.priorityDatasetsCitationMissing') then 'FAILED' 
 else if ($messages/@ref = 'TR.priorityDatasetsInvalidDate') then 'FAILED'
 else if ($messages/@ref = 'TR.priorityDatasetsAtleastOneKeyword') then 'FAILED'
 else if ($messages/@ref = 'TR.priorityDatasetsInvalidKeyword') then 'FAILED'
 else if ($messages/@ref = 'TR.priorityDatasetsInvalidDateCodeListValue') then 'FAILED' 
 else 'PASSED',
 local:error-statistics('TR.recordsWithErrors', count(fn:distinct-values($messages//etf:argument[@token='id']/text()))),
 $messages)</textarea></div>
                              <div class="FailureMessage"><label for="d426566e5644">Messages</label><textarea id="d426566e5644.failureMessages" data-mini="true" readonly class="ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-mini ui-textinput-autogrow">The metadata record set has 1 record(s) with errors for this assertion.&#xD;
XML document '2b_HELEO-L1C-INSPIRE-THE-CORRECT - Version_3 - Copy.xml', record 'Hxx04_O_1CNA_HR_MSVNIR_20260912T104502_20260912T104504_00523_A01_20250912T111554_1': Check manually that a proper keyword is provided if the data set or data set series is a priority dataset.&#xD;
</textarea></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div data-role="footer">
         <h1>Report generated by ETF</h1>
      </div>
      <div class="ui-field-contain" id="lodFadinMenu" style="display: none; width: 200px; position: fixed; top: 10px; right: 5px;" data-role="controlgroup"><label for="select-Show">Level of detail</label><select name="select-Show" id="lodFadinMenuSelect" data-mini="true">
            <option value="cntrlAllDetails">All details</option>
            <option value="cntrlLessInformation">Less information</option>
            <option value="cntrlSimplified" selected>Simplified</option></select></div><script>
			
			function SelectorCache() {
				var cache = {};
				function getFromCache( selector ) {
					if ( undefined === cache[ selector ] ) {
						cache[ selector ] = $( selector );
					}
					return cache[ selector ];
				}
				return { get: getFromCache };
			}
			var cache = new SelectorCache();

			function hide(elements) {
				elements.css({ display: 'none' });
			}

			function show(elements) {
				elements.css({ display: '' });
			}

			function updateLod(cntrl) {
				if(cntrl=="cntrlSimplified")
				{
					hide(cache.get('.ReportDetail, .DoNotShowInSimpleView, .XQueryContainsAssertion'));
				}
				else if(cntrl=="cntrlLessInformation")
				{
					hide(cache.get('.ReportDetail'));
					show(cache.get('.DoNotShowInSimpleView'));
				}
				else if(cntrl=="cntrlAllDetails")
				{
					show(cache.get('.ReportDetail, .DoNotShowInSimpleView'));
				}
			}
			
			
			cache.get( "input[name=radio-filter]" ).on( "click", function() {
			
			var cntrl = $( "input[name=radio-filter]:checked" ).val();
				if(cntrl=="cntrlShowOnlyFailed")
				{
					hide(cache.get('.SuccessfulTestModule, .ManualTestModule, .SkippedTestModule, .SuccessfulTestCase, .ManualTestCase, .SuccessfulTestStep, .ManualTestStep, .SuccessfulAssertion, .ManualAssertion, .SkippedTestCase, .SkippedTestStep, .SkippedAssertion'));					
					show(cache.get('.FailedTestCase, .FailedTestStep, .FailedAssertion'));
					
					if(cache.get('.TestStep, .Assertion').length < 3500) {
						cache.get('.TestSuite').collapsible('expand');
						cache.get('.FailedTestModule').collapsible('expand');
						cache.get('.FailedTestCase').collapsible('expand');
						cache.get('.FailedTestStep').collapsible('expand');
						cache.get('.FailedAssertion').collapsible('expand');
					}
				}
				else if(cntrl=="cntrlShowOnlyManual")
				{
					hide(cache.get('.SuccessfulTestModule, .FailedTestModule, .SkippedTestModule, .SuccessfulTestCase, .FailedTestCase, .SkippedTestCase, .SkippedTestStep, .SkippedAssertion, .SuccessfulTestStep, .FailedTestStep, .SuccessfulAssertion, .FailedAssertion'));
					show(cache.get('.ManualTestModule, .ManualTestCase, .ManualTestStep, .ManualAssertion'));
					
					if(cache.get('.TestStep, .Assertion').length < 3500) {
						cache.get('.TestSuite').collapsible('expand');
						cache.get('.ManualTestModule').collapsible('expand');
						cache.get('.ManualTestCase').collapsible('expand');
						cache.get('.ManualTestStep').collapsible('expand');
						cache.get('.ManualAssertion').collapsible('expand');
					}
				}
				else if(cntrl=="cntrlShowAll")
				{
					show(cache.get('.SuccessfulTestModule, .FailedTestModule, .ManualTestModule, .SkippedTestModule, .SuccessfulTestCase, .SuccessfulTestStep, .SuccessfulAssertion, .SkippedTestCase, .SkippedTestStep, .SkippedAssertion, .ManualTestCase, .ManualTestStep, .ManualAssertion, .FailedTestCase, .FailedTestStep, .FailedAssertion'));
				}
			});
			
			$.fn.exists = function(){ return this.length > 0; }
			
			$.fn.getParentWithClass = function(className) {
				var p = this.parent();
				if(p.exists()) {
					return p.hasClass(className) ? p : p.getParentWithClass(className);
				}
				console.warn('Parent class '+className+' not found');
				return null;
			}
			
			
			function jumpToAnchor(anchorId) {
				var anchorElement = $('#'+anchorId);
				if(anchorId!="" && anchorElement.exists()) {
					console.log("Scrolling to anchor: "+anchorId);
					// Expand parent model items

					anchorElement.collapsible('expand').getParentWithClass("TestSuite").collapsible('expand');
					var testModulePar = anchorElement.collapsible('expand').getParentWithClass("TestModule")
					if(testModulePar) {
						testModulePar.collapsible('expand');
					}
					var testCasePar = anchorElement.collapsible('expand').getParentWithClass("TestCase");
					if(testCasePar) {
						testCasePar.collapsible('expand');
					}
					var testStepPar = anchorElement.collapsible('expand').getParentWithClass("TestStep");
					if(testStepPar) {
						testStepPar.collapsible('expand');
					}
					var position = $(anchorElement).offset().top;
					$("html, body").stop().animate({ scrollTop: position });
					window.history.pushState(null,"", "#"+anchorId);
				}
			}			
			
			$("#controlgroupLOD input").on( "click", function() {
				var cntrl = $( "#controlgroupLOD input:checked" ).val();
				$('#lodFadinMenuSelect').val(cntrl).selectmenu('refresh');
				updateLod(cntrl);
			});
			$("#lodFadinMenuSelect").on( "change", function() {
				var cntrl = $( "#lodFadinMenuSelect option:selected").val()
				$("#cntrlAllDetails").prop('checked', false).checkboxradio("refresh");
				$("#cntrlLessInformation").prop('checked', false).checkboxradio("refresh");
				$("#cntrlSimplified").prop('checked', false).checkboxradio("refresh");
				$("#"+cntrl).prop('checked', true).checkboxradio("refresh");
				updateLod(cntrl);
			});	
			$(document).scroll(function () {
				var y = $(this).scrollTop();
				if (y > 370) {
					cache.get('#lodFadinMenu').fadeIn();
				} else {
					cache.get('#lodFadinMenu').fadeOut();
				}
			});
			
			
			$(document).one('pagebeforeshow', function() {				
				
				var url = decodeURIComponent(window.location.href);
				var anchorIdx = url.indexOf("#");
				var anchorId = anchorIdx != -1 ? url.substring(anchorIdx+1) : "";
				var anchorElement = $('#'+anchorId);
				if(anchorId!="" && anchorElement.exists()) {
					cache.get('.DoNotShowInSimpleView').show();
					jumpToAnchor(anchorId);
					$("body").one("pagecontainershow", function () {
						var position = cache.get(anchorElement).offset().top;
						// ... but it works...
						setTimeout( function() {
							cache.get("html, body").stop().animate({ scrollTop: position });
							},150);
						});
				}
				
				
				if ( cache.get('.ManualTestCase, .ManualTestStep, .ManualAssertion').length==0) {
					cache.get('#cntrlShowOnlyManual').checkboxradio();
					cache.get('#cntrlShowOnlyManual').checkboxradio('refresh');
					cache.get('#cntrlShowOnlyManual').checkboxradio('disable').checkboxradio('refresh');
				}
				
				
				hide(cache.get('.ReportDetail, .DoNotShowInSimpleView, .XQueryContainsAssertion'));
				
			});
			
		</script></body>
</html>